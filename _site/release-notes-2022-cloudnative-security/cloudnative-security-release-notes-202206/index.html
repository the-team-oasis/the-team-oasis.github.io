<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>6월 OCI Cloud Native &amp; Security 업데이트 소식</title>

    <link rel="stylesheet" type="text/css" href="http://localhost:4000//assets/css/styles_feeling_responsive.css">

  

	<script src="http://localhost:4000//assets/js/modernizr.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
	<script>
		WebFont.load({
			google: {
				families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ]
			}
		});
	</script>

	<noscript>
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'>
	</noscript>


	<!-- Search Engine Optimization -->
	<meta name="description" content="2022년 6월 OCI Cloud Native &amp; Security 업데이트 소식입니다.">
	<meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ">
	<meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" >
	
	
	
	<link rel="canonical" href="http://localhost:4000//release-notes-2022-cloudnative-security/cloudnative-security-release-notes-202206/">


	<!-- Facebook Open Graph -->
	<meta property="og:title" content="6월 OCI Cloud Native &amp; Security 업데이트 소식">
	<meta property="og:description" content="2022년 6월 OCI Cloud Native &amp; Security 업데이트 소식입니다.">
	<meta property="og:url" content="http://localhost:4000//release-notes-2022-cloudnative-security/cloudnative-security-release-notes-202206/">
	<meta property="og:locale" content="en_EN">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="OASIS's Technical Blog">
	
	<meta property="article:author" content="https://www.facebook.com/phlow.media">


	
	<!-- Twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="phlow">
	<meta name="twitter:creator" content="phlow">
	<meta name="twitter:title" content="6월 OCI Cloud Native &amp; Security 업데이트 소식">
	<meta name="twitter:description" content="2022년 6월 OCI Cloud Native &amp; Security 업데이트 소식입니다.">
	
	

	<link type="text/plain" rel="author" href="http://localhost:4000//humans.txt">

	

	

	<link rel="icon" sizes="32x32" href="http://localhost:4000/assets/img/favicon-32x32.png">

	<link rel="icon" sizes="192x192" href="http://localhost:4000/assets/img/touch-icon-192x192.png">

	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://localhost:4000/assets/img/apple-touch-icon-180x180-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/assets/img/apple-touch-icon-152x152-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/apple-touch-icon-144x144-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/assets/img/apple-touch-icon-120x120-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/apple-touch-icon-114x114-precomposed.png">

	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/assets/img/apple-touch-icon-76x76-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/apple-touch-icon-72x72-precomposed.png">

	<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/assets/img/apple-touch-icon-precomposed.png">	

	<meta name="msapplication-TileImage" content="http://localhost:4000/assets/img/msapplication_tileimage.png">

	<meta name="msapplication-TileColor" content="#fabb00">


	

	
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-XPHZDWLS3K"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-XPHZDWLS3K');
	</script>
	


</head>
<body id="top-of-page" class="page-fullwidth">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar data-options="scrolltop: false">
    <ul class="title-area">
      <li class="name">
      <h1 class="hide-for-large-up"><a href="http://localhost:4000/" class="icon-tree"> OASIS's Technical Blog</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar toggle-topbar-click menu-icon"><a><span>Nav</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="left">
        

              

          
          

            
            
              <li><a  href="http://localhost:4000//">HOME</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://localhost:4000//blog">BLOG</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="http://localhost:4000//categories/">CATEGORIES</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="http://localhost:4000//getting-started/">Getting Started</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//infrastructure/">Infrastructure</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//cloudnative/">Cloud Native</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//database/">Data Platform</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//aiml/">AI/ML</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//security/">Security</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="http://localhost:4000//release-notes-2022/">Release Notes (2022)</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="http://localhost:4000//release-notes-2022-infrastructure/">Infrastructure</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//release-notes-2022-cloudnative-security/">Cloud Native &amp; Security</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//release-notes-2022-database">Data Platform</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//release-notes-2022-aiml/">AI/ML</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          
        

              

          
          
        
        
      </ul>
      
      

      <ul class="right">
        

              



          
          
        

              



          
          
        

              



          
          
        

              



          
          
        

              



          
          
            
            
              <li class="divider"></li>
              <li><a  href="http://localhost:4000//learning/">Learning</a></li>

            
            
          
        

              



          
          
            
            
              <li class="divider"></li>
              <li><a  href="http://localhost:4000//search/">Search</a></li>

            
            
          
        
        
      </ul>
     
    </section>
  </nav>
</div><!-- /#navigation -->

	

	




<nav class="breadcrumbs" role="menubar" aria-label="breadcrumbs">
 <a href="http://localhost:4000/">HOME</a>
 
   
    
        <a href="http://localhost:4000//release-notes-2022-cloudnative-security/">release notes 2022 cloudnative security</a>
    
  
    
        <a class="current">6월 OCI Cloud Native & Security 업데이트 소식</a>
    
  
</nav>




	


<div class="row t30">
	<div class="medium-12 columns">
		<article>
			<header>
				<p class="subheadline">OCI Release Notes 2022</p>
				<h1>6월 OCI Cloud Native & Security 업데이트 소식</h1>
			</header>

			
			<p class="teaser">
				2022년 6월 OCI Cloud Native & Security 업데이트 소식입니다.
			</p>
			

			<div class="panel radius">
  <p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#support-for-fault-domains-in-node-pool-placement-configuration" id="markdown-toc-support-for-fault-domains-in-node-pool-placement-configuration">Support for fault domains in node pool placement configuration</a>    <ul>
      <li><a href="#기능-소개" id="markdown-toc-기능-소개">기능 소개</a></li>
    </ul>
  </li>
  <li><a href="#support-for-oke-images-as-worker-node-base-images" id="markdown-toc-support-for-oke-images-as-worker-node-base-images">Support for OKE images as worker node base images</a>    <ul>
      <li><a href="#기능-소개-1" id="markdown-toc-기능-소개-1">기능 소개</a></li>
    </ul>
  </li>
  <li><a href="#private-endpoints-for-resource-manager" id="markdown-toc-private-endpoints-for-resource-manager">Private endpoints for Resource Manager</a>    <ul>
      <li><a href="#기능-소개-2" id="markdown-toc-기능-소개-2">기능 소개</a></li>
      <li><a href="#oci-console에서-private-endpoint-생성" id="markdown-toc-oci-console에서-private-endpoint-생성">OCI Console에서 Private Endpoint 생성</a></li>
      <li><a href="#private-git-server-접속" id="markdown-toc-private-git-server-접속">Private Git Server 접속</a></li>
    </ul>
  </li>
  <li><a href="#web-application-acceleration" id="markdown-toc-web-application-acceleration">Web Application Acceleration</a>    <ul>
      <li><a href="#서비스-소개" id="markdown-toc-서비스-소개">서비스 소개</a></li>
    </ul>
  </li>
  <li><a href="#support-for-backend-set-worker-node-selection-for-load-balancers-created-by-container-engine-for-kubernetes" id="markdown-toc-support-for-backend-set-worker-node-selection-for-load-balancers-created-by-container-engine-for-kubernetes">Support for backend set worker node selection for load balancers created by Container Engine for Kubernetes</a>    <ul>
      <li><a href="#기능-소개-3" id="markdown-toc-기능-소개-3">기능 소개</a></li>
    </ul>
  </li>
  <li><a href="#support-for-worker-node-deletion-along-with-new-cordon-and-drain-options" id="markdown-toc-support-for-worker-node-deletion-along-with-new-cordon-and-drain-options">Support for worker node deletion, along with new cordon and drain options</a>    <ul>
      <li><a href="#기능-소개-4" id="markdown-toc-기능-소개-4">기능 소개</a></li>
      <li><a href="#cordoning-및-draining" id="markdown-toc-cordoning-및-draining">Cordoning 및 Draining</a>        <ul>
          <li><a href="#cordoning" id="markdown-toc-cordoning">Cordoning</a></li>
          <li><a href="#draining" id="markdown-toc-draining">Draining</a></li>
        </ul>
      </li>
      <li><a href="#node-삭제-방법" id="markdown-toc-node-삭제-방법">Node 삭제 방법</a>        <ul>
          <li><a href="#축출-유예-기간-eviction-grade-period" id="markdown-toc-축출-유예-기간-eviction-grade-period">축출 유예 기간 (Eviction grade period)</a></li>
          <li><a href="#유예-기간-후-강제-종료-force-terminate-after-grace-period" id="markdown-toc-유예-기간-후-강제-종료-force-terminate-after-grace-period">유예 기간 후 강제 종료 (Force terminate after grace period)</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

</div>

<h2 id="support-for-fault-domains-in-node-pool-placement-configuration">Support for fault domains in node pool placement configuration</h2>
<ul>
  <li><strong>Services:</strong> Container Engine for Kubernetes</li>
  <li><strong>Release Date:</strong> June 1, 2022</li>
  <li><strong>Documentation:</strong> <a href="https://docs.oracle.com/en-us/iaas/Content/ContEng/Tasks/contengcreatingpersistentvolumeclaim.htm#Provisioning_Persistent_Volume_Claims_on_the_Block_Volume_Service" target="_blank" rel="noopener">https://docs.oracle.com/en-us/iaas/Content/ContEng/Tasks/contengcreatingpersistentvolumeclaim.htm#Provisioning_Persistent_Volume_Claims_on_the_Block_Volume_Service</a></li>
</ul>

<h3 id="기능-소개">기능 소개</h3>
<p>이제 Worker Node Pool을 생성할 때 가용성 도메인(Availability Domain: AD)을 지정하면서, 하나 이상의 결함 도메인(Fault Domain)을 지정할 수 있습니다. 만약 장애 도메인을 지정하지 않으면, 작업자 노드가 해당 가용성 도메인의 모든 장애 도메인에 최대한 균등하게 분산됩니다.</p>

<blockquote>
  <p>현재 해당 기능은 당분간 지원이 보류됩니다.</p>
</blockquote>

<hr />

<h2 id="support-for-oke-images-as-worker-node-base-images">Support for OKE images as worker node base images</h2>
<ul>
  <li><strong>Services:</strong> Container Engine for Kubernetes</li>
  <li><strong>Release Date:</strong> June 1, 2022</li>
  <li><strong>Documentation:</strong> <a href="https://docs.oracle.com/en-us/iaas/Content/ContEng/Reference/contengimagesshapes.htm#images" target="_blank" rel="noopener">https://docs.oracle.com/en-us/iaas/Content/ContEng/Reference/contengimagesshapes.htm#images</a></li>
</ul>

<h3 id="기능-소개-1">기능 소개</h3>
<p>이제 클러스터 혹은 노드 풀을 생성/업데이트 할 때 Worker Node의 기본 이미지로 OKE 이미지를 지원합니다.</p>

<ul>
  <li>OKE 이미지를 사용하면 기존 플랫폼 이미지나 커스텀 이미지를 사용하여 프로비저닝하는 시간보다 절반 이상으로 빠르게 프로비저닝됩니다.</li>
  <li>OKE 이미지에는 Worker Node로서 필요한 모든 구성 요소와 필수 소프트웨어가 최적화되어 포함되어 있습니다.</li>
  <li>OKE 이미지는 Oracle에서 제공하며 기본 플랫폼 이미지 위에 구성됩니다.</li>
</ul>

<p><img src="/assets/img/cloudnative-security/2022/oci-cloudnative-security-release-notes-06-1.png" alt="" /></p>

<hr />

<h2 id="private-endpoints-for-resource-manager">Private endpoints for Resource Manager</h2>
<ul>
  <li><strong>Services:</strong> Resource Manager</li>
  <li><strong>Release Date:</strong> June 8, 2022</li>
  <li><strong>Documentation:</strong> <a href="https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/private-endpoints.htm" target="_blank" rel="noopener">https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/private-endpoints.htm</a></li>
</ul>

<h3 id="기능-소개-2">기능 소개</h3>
<p>이제 리소스 매니저 (Resource Manager)에서 Private Resource (e.g. Private Compute Instance, Private Github)에 접속할 수 있습니다.</p>

<p>리소스 매니저는 테라폼 (Terraform)을 지원하는 IaC 도구입니다. Private Resource 접속을 위한 테라폼 구성 예제 코드와 작성 방법은 다음과 같습니다. (Remote Exec를 활용해 Private Instance에 접속하는 방법)</p>

<blockquote>
  <p>https://github.com/oracle/terraform-provider-oci/blob/master/examples/resourcemanager/create_private_endpoint.tf</p>
</blockquote>

<ol>
  <li>Private Instace를 생성하는 테라폼 구성 작성
    <div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Compute instance that our SSH connection will be established with.</span>
  <span class="k">resource</span> <span class="s2">"oci_core_instance"</span> <span class="s2">"private_endpoint_instance"</span> <span class="p">{</span>
 <span class="nx">compartment_id</span> <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="kd">var</span><span class="p">.</span><span class="nx">compartment_ocid</span><span class="k">}</span><span class="s2">"</span>
 <span class="nx">display_name</span> <span class="p">=</span> <span class="s2">"test script as one remote-exec instance"</span>

 <span class="nx">availability_domain</span> <span class="p">=</span> <span class="nx">lookup</span><span class="p">(</span><span class="k">data</span><span class="p">.</span><span class="nx">oci_identity_availability_domains</span><span class="p">.</span><span class="nx">get_availability_domains</span><span class="p">.</span><span class="nx">availability_domains</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">"name"</span><span class="p">)</span>
 <span class="nx">shape</span> <span class="p">=</span> <span class="kd">local</span><span class="p">.</span><span class="nx">default_shape_name</span>

 <span class="c1">// specify the subnet and that there is no public IP assigned to the instance</span>
 <span class="nx">create_vnic_details</span> <span class="p">{</span>
   <span class="nx">subnet_id</span> <span class="p">=</span> <span class="nx">oci_core_subnet</span><span class="p">.</span><span class="nx">private_endpoint_integ_test_temp_subnet</span><span class="p">.</span><span class="nx">id</span>
   <span class="nx">assign_public_ip</span> <span class="p">=</span> <span class="kc">false</span>
 <span class="p">}</span>

 <span class="nx">extended_metadata</span> <span class="p">=</span> <span class="p">{</span>
   <span class="nx">ssh_authorized_keys</span> <span class="p">=</span> <span class="nx">tls_private_key</span><span class="p">.</span><span class="nx">public_private_key_pair</span><span class="p">.</span><span class="nx">public_key_openssh</span>
 <span class="p">}</span>

 <span class="c1">// use latest oracle linux image via data source</span>
 <span class="nx">source_details</span> <span class="p">{</span>
   <span class="nx">source_id</span> <span class="p">=</span> <span class="k">data</span><span class="p">.</span><span class="nx">oci_core_images</span><span class="p">.</span><span class="nx">available_instance_images</span><span class="p">.</span><span class="nx">images</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">id</span>
   <span class="nx">source_type</span> <span class="p">=</span> <span class="s2">"image"</span>
 <span class="p">}</span>

 <span class="nx">shape_config</span> <span class="p">{</span>
   <span class="nx">memory_in_gbs</span> <span class="p">=</span> <span class="mi">4</span>
   <span class="nx">ocpus</span> <span class="p">=</span> <span class="mi">1</span>
 <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>테라폼 구성에 리소스 매니저의 Private Endpoint 생성을 위한 구성 작성
    <div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// The RMS private endpoint resource. Requires a VCN with a private subnet</span>
  <span class="k">resource</span> <span class="s2">"oci_resourcemanager_private_endpoint"</span> <span class="s2">"rms_private_endpoint"</span> <span class="p">{</span>
 <span class="nx">compartment_id</span> <span class="p">=</span> <span class="kd">var</span><span class="p">.</span><span class="nx">compartment_ocid</span>
 <span class="nx">display_name</span>   <span class="p">=</span> <span class="s2">"rms_private_endpoint"</span>
 <span class="nx">description</span>    <span class="p">=</span> <span class="s2">"rms_private_endpoint_description"</span>
 <span class="nx">vcn_id</span>         <span class="p">=</span> <span class="nx">oci_core_vcn</span><span class="p">.</span><span class="nx">private_endpoint_integ_test_temp_vcn</span><span class="p">.</span><span class="nx">id</span>
 <span class="nx">subnet_id</span>      <span class="p">=</span> <span class="nx">oci_core_subnet</span><span class="p">.</span><span class="nx">private_endpoint_integ_test_temp_subnet</span><span class="p">.</span><span class="nx">id</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>테라폼 구성으로 Private Endpoint에서 도달 가능한 IP(reachable IP) 데이터 작성
    <div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Resolves the private IP of the customer's private endpoint to a NAT IP. Used as the host address in the "remote-exec" resource</span>
  <span class="k">data</span> <span class="s2">"oci_resourcemanager_private_endpoint_reachable_ip"</span> <span class="s2">"test_private_endpoint_reachable_ips"</span> <span class="p">{</span>
 <span class="nx">private_endpoint_id</span> <span class="p">=</span> <span class="nx">oci_resourcemanager_private_endpoint</span><span class="p">.</span><span class="nx">rms_private_endpoint</span><span class="p">.</span><span class="nx">id</span>
 <span class="nx">private_ip</span>          <span class="p">=</span> <span class="nx">oci_core_instance</span><span class="p">.</span><span class="nx">private_endpoint_instance</span><span class="p">.</span><span class="nx">private_ip</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>Private Instance에 SSH 접속하여 명령어 실행
    <div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Resource to establish the SSH connection. Must have the compute instance created first.</span>
  <span class="k">resource</span> <span class="s2">"null_resource"</span> <span class="s2">"remote-exec"</span> <span class="p">{</span>
 <span class="nx">depends_on</span> <span class="p">=</span> <span class="p">[</span><span class="nx">oci_core_instance</span><span class="p">.</span><span class="nx">private_endpoint_instance</span><span class="p">]</span>

 <span class="k">provisioner</span> <span class="s2">"remote-exec"</span> <span class="p">{</span>
   <span class="nx">connection</span> <span class="p">{</span>
     <span class="nx">agent</span> <span class="p">=</span> <span class="kc">false</span>
     <span class="nx">timeout</span> <span class="p">=</span> <span class="s2">"30m"</span>
     <span class="nx">host</span> <span class="p">=</span> <span class="k">data</span><span class="p">.</span><span class="nx">oci_resourcemanager_private_endpoint_reachable_ip</span><span class="p">.</span><span class="nx">test_private_endpoint_reachable_ips</span><span class="p">.</span><span class="nx">ip_address</span>
     <span class="nx">user</span> <span class="p">=</span> <span class="s2">"opc"</span>
     <span class="nx">private_key</span> <span class="p">=</span> <span class="nx">tls_private_key</span><span class="p">.</span><span class="nx">public_private_key_pair</span><span class="p">.</span><span class="nx">private_key_pem</span>
   <span class="p">}</span>
   <span class="c1">// write to a file on the compute instance via the private access SSH connection</span>
   <span class="nx">inline</span> <span class="p">=</span> <span class="p">[</span>
     <span class="s2">"echo 'remote exec showcase' &gt; ~/remoteExecTest.txt"</span>
   <span class="p">]</span>
 <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="oci-console에서-private-endpoint-생성">OCI Console에서 Private Endpoint 생성</h3>
<p>리소스 매니저의 Private Endpoint는 테라폼 구성외에도 OCI UI Console에서도 생성할 수 있습니다.</p>

<p><img src="/assets/img/cloudnative-security/2022/oci-cloudnative-security-release-notes-06-2.png" alt="" /></p>

<h3 id="private-git-server-접속">Private Git Server 접속</h3>
<p>Private Endpoint를 활용하면 Private Git Server에 있는 테라폼 구성에 접근할 수 있습니다. 관련 가이드는 아래 링크 참고합니다.</p>

<blockquote>
  <p>https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/private-endpoints.htm#private-git</p>
</blockquote>

<hr />

<h2 id="web-application-acceleration">Web Application Acceleration</h2>
<ul>
  <li><strong>Services:</strong> Web Application Acceleration</li>
  <li><strong>Release Date:</strong> June 15, 2022</li>
  <li><strong>Documentation:</strong> <a href="https://docs.oracle.com/en-us/iaas/releasenotes/changes/d71db04b-0015-47c8-9e9c-ff7e4b334a78/" target="_blank" rel="noopener">https://docs.oracle.com/en-us/iaas/releasenotes/changes/d71db04b-0015-47c8-9e9c-ff7e4b334a78/</a></li>
</ul>

<h3 id="서비스-소개">서비스 소개</h3>
<p>Web Application Acceleration(WAA)은 압축과 캐싱기능을 활용하여 Layer 7 Load Balancer의 트래픽 속도를 높여주는 서비스입니다.</p>

<p><strong><em>WAA UI</em></strong><br />
<img src="/assets/img/cloudnative-security/2022/oci-cloudnative-security-release-notes-06-3.png" alt="" /></p>

<p>현재 WAA에서 압축을 지원하는 응답 유형은 다음과 같습니다.</p>
<ul>
  <li>application/atom+xml</li>
  <li>application/geo+json</li>
  <li>application/javascript</li>
  <li>application/x-javascript</li>
  <li>application/json</li>
  <li>application/ld+json</li>
  <li>application/manifest+json</li>
  <li>application/rdf+xml</li>
  <li>application/rss+xml</li>
  <li>application/xhtml+xml</li>
  <li>application/xml</li>
  <li>font/eot</li>
  <li>font/otf</li>
  <li>font/ttf</li>
  <li>image/svg+xml</li>
  <li>text/css</li>
  <li>text/javascript</li>
  <li>text/plain</li>
  <li>text/xml</li>
</ul>

<p>WAA를 구성 시의 유의 사항은 다음과 같습니다.</p>
<ul>
  <li>압축된 결과를 얻기 위해서는 반드시 요청 헤더에 <strong>Accept-Encoding</strong>이 포함되어야 합니다.</li>
  <li>응답 헤더에 <strong>Cache-Control</strong> 값으로 <strong>Private</strong> 또는 <strong>no-store</strong>가 포함된 경우에는 캐시를 지원하지 않습니다.</li>
</ul>

<hr />

<h2 id="support-for-backend-set-worker-node-selection-for-load-balancers-created-by-container-engine-for-kubernetes">Support for backend set worker node selection for load balancers created by Container Engine for Kubernetes</h2>
<ul>
  <li><strong>Services:</strong> Container Engine for Kubernetes</li>
  <li><strong>Release Date:</strong> June 21, 2022</li>
  <li><strong>Documentation:</strong> <a href="https://docs.oracle.com/en-us/iaas/Content/ContEng/Tasks/contengcreatingloadbalancer.htm#contengcreatingloadbalancer_topic-Selecting_worker_nodes_to_include_in_backend_sets" target="_blank" rel="noopener">https://docs.oracle.com/en-us/iaas/Content/ContEng/Tasks/contengcreatingloadbalancer.htm#contengcreatingloadbalancer_topic-Selecting_worker_nodes_to_include_in_backend_sets</a></li>
</ul>

<h3 id="기능-소개-3">기능 소개</h3>
<p>OCI Load Balancer 또는 Network Load Balancer로 들어오는 트래픽은 백엔드 세트(Backend Set)의 백엔드 서버로 분산됩니다. 기본적으로 Load Balancer 또는 Network Load Balancer 서비스를 배포하면, Cluster Node에 있는 모든 Worker Node가 백엔드 세트에 포함됩니다.</p>

<p>하지만, 이번에 새로 지원하는 기능을 활용하면, 백엔드 세트에 포함할 노드를 특정하여 추가할 수 있습니다. 이 기능을 활용하여, Cluster내의 Worker Node들을 분류하여 서비스에 적용하는 형태로 논리적인 클러스터로 구성할 수 있습니다.</p>

<p>다음은 Load Balancer에 특정 Label(lbset=set1)을 갖는 Worker Node를 Backend Set으로 추가하는 예제입니다.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">my-nginx-svc</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">oci.oraclecloud.com/load-balancer-type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">lb"</span>
    <span class="na">oci.oraclecloud.com/node-label-selector</span><span class="pi">:</span> <span class="s">lbset=set1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">LoadBalancer</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
</code></pre></div></div>

<p>다음은 Network Load Balancer에 특정 Label(lbset=set1)을 갖는 Worker Node를 Backend Set으로 추가하는 예제입니다.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">my-nginx-svc</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">oci.oraclecloud.com/load-balancer-type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">nlb"</span>
    <span class="na">oci-network-load-balancer.oraclecloud.com/node-label-selector</span><span class="pi">:</span> <span class="s">lbset=set1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">LoadBalancer</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
</code></pre></div></div>

<p>다음은 Label 값으로 set1 또는 set3 값을 갖는 Worker Node들을 Backend Set에 추가하는 Annotation 예시입니다.</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Load Balancer
oci.oraclecloud.com/node-label-selector: lbset in (set1, set3)

# Network Load Balancer
oci-network-load-balancer.oraclecloud.com/node-label-selector: lbset in (set1, set3)
</code></pre></div></div>

<p>Lable 값에 상관없이 특정 Label 키 (lbset)를 가진 Worker Node만 Backend Set에 추가할 수 있습니다.</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Load Balancer
oci.oraclecloud.com/node-label-selector: lbset

# Network Load Balancer
oci-network-load-balancer.oraclecloud.com/node-label-selector: lbset
</code></pre></div></div>

<p>env=prod 라는 Label을 갖고, set1 또는 set3 값을 갖는 Worker Node들을 할당한 예시입니다.</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Load Balancer
oci.oraclecloud.com/node-label-selector: env=prod,lbset in (set1, set3)

# Network Load Balancer
oci-network-load-balancer.oraclecloud.com/node-label-selector: env=prod,lbset in (set1, set3)
</code></pre></div></div>

<p>Label env가 test라는 값을 갖지 않는 모든 노드를 포함합니다.</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Load Balancer
oci.oraclecloud.com/node-label-selector: env!=test

# Network Load Balancer
oci-network-load-balancer.oraclecloud.com/node-label-selector: env!=test
</code></pre></div></div>

<h2 id="support-for-worker-node-deletion-along-with-new-cordon-and-drain-options">Support for worker node deletion, along with new cordon and drain options</h2>
<ul>
  <li><strong>Services:</strong> Container Engine for Kubernetes</li>
  <li><strong>Release Date:</strong> June 28, 2022</li>
  <li><strong>Documentation:</strong> <a href="https://docs.oracle.com/en-us/iaas/Content/ContEng/Tasks/contengdeletingworkernodes.htm" target="_blank" rel="noopener">https://docs.oracle.com/en-us/iaas/Content/ContEng/Tasks/contengdeletingworkernodes.htm</a></li>
</ul>

<h3 id="기능-소개-4">기능 소개</h3>
<p>OKE Node Pool의 특정 Worker Node를 삭제하는 기능이 포함되었습니다.</p>

<p>OKE에서 Node 삭제와 관련된 일반적인 유의 사항은 다음과 같습니다.</p>
<ul>
  <li>Worker Node를 삭제 대상으로 한번 지정하면, 다시 되돌릴 수 없습니다. 만약 처음 삭제 작업이 실패하면, 다음 Node Pool 업데이트 (예. 노드 확장)시에 다시 해당 노드를 삭제 시도합니다.</li>
  <li>특정 Node를 삭제 시도하는 것 외에도 Node Pool의 스케일을 조정하여 삭제도 가능합니다.</li>
  <li>OKE에서 생성된 Worker Node의 이름은 임의로 할당이 됩니다. 임의 할당된 이름을 변경하게 되면, 클러스터를 삭제 시 같이 삭제되지 않습니다.</li>
</ul>

<h3 id="cordoning-및-draining">Cordoning 및 Draining</h3>
<p>특정 Worker Node 삭제 시 <strong>Corden</strong> 및 <strong>Drain</strong> 옵션을 제공합니다.</p>
<h4 id="cordoning">Cordoning</h4>
<p>Cordoning은 Kubernetes Cluster의 Worker Node를 Unscheduling 하는 옵션으로, kube-scheduler가 해당 노드에 새로은 Pod 배치를 방지합니다. 단, 기존에 배치된 Pod에는 영향을 주지 않습니다.</p>

<h4 id="draining">Draining</h4>
<p>Draining은 Kubernetes Cluster의 삭제하고자 하는 Worker Node에 있는 Pod를 안전하게 다른 Worker Node로 이동시키기 위한 옵션입니다. 이동이 완료되면 기존 Node에 있는 Pod의 컨테이너도 정상적으로 종료되고, 정리됩니다.</p>

<h3 id="node-삭제-방법">Node 삭제 방법</h3>
<p>OKE 노드풀의 노드를 클릭한 후 작업(Action)을 선택하여 삭제(Delete Note)를 수행할 수 있으며, 삭제 대화창에서 고급 옵션 표시(Show Advanced Options)를 선택하면 다음과 같이 <strong>Cordon</strong> 및 <strong>drain</strong> 지정 옵션을 확인할 수 있습니다.</p>

<p><img src="/assets/img/cloudnative-security/2022/oci-cloudnative-security-release-notes-06-4.png" alt="" /></p>

<h4 id="축출-유예-기간-eviction-grade-period">축출 유예 기간 (Eviction grade period)</h4>
<p>축출 유예 기간은 삭제 대상 Node에 대한 <strong>Cordoning</strong> (스케쥴러에서 배제) 및 <strong>Draining</strong> (Pod를 다른 노드로 이동)하기 위한 유예 시간을 지정하는 부분으로 기본 <strong>60</strong>분입니다. 만약 유예 시간없이 즉시 삭제하고 싶다면, <strong>0을</strong> 지정합니다.</p>

<h4 id="유예-기간-후-강제-종료-force-terminate-after-grace-period">유예 기간 후 강제 종료 (Force terminate after grace period)</h4>
<p>축출 유예 기간이 경과했는데도 불구하고 <strong>Cordoning</strong> 및 <strong>Draining</strong>이 완료되지 않았어도 해당 Node를 강제로 종료 (Terminate)되도록 설정하는 옵션입니다. 만일 이 옵션을 사용하지 않은 상태에서 축출 유예 기간이 경과한 Node는 <strong>주의 필요 (Needs attention)</strong> 상태로 표기됩니다. <strong>주의 필요</strong> 상태의 Node를 해결하기 위해서는 기존과 같으 <strong>노드 삭제</strong> 작업을 재 수행하면서 <strong>유예 기간 후 강제 종료</strong> 옵션을 선택하여 강제 종료합니다.</p>


			
			
						<div id="page-meta" class="t30">
				<p>
					<!-- Look the author details up from the site config. -->
					
					<!-- Output author details if some exist. -->
					
					<span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="pr20 icon-edit"><a href="http://github.com/mangdan" target="_blank"> DanKim</a></span>
				</span>
				

				
				<time class="icon-calendar pr20" datetime="2022-06-30T00:00:00+09:00" itemprop="datePublished"> 2022-06-30</time>
				

				<span class="icon-archive pr20"> RELEASE-NOTES-2022-CLOUDNATIVE-SECURITY</span>
				<br />
				<span class="pr20"><span class="icon-price-tag pr10"> oci-release-notes-2022</span> <span class="icon-price-tag pr10"> june-2022</span> <span class="icon-price-tag pr10"> cloudnative</span> </span>
			</p>

			
			<div id="post-nav" class="row">
				

				
				<div class="medium-5 columns"><a class="button small radius prev" href="/release-notes-2022-cloudnative-security/cloudnative-security-release-notes-202205/">&laquo; 5월 OCI Cloud Native & Security 업데이트 소식</a></div><!-- /.small-4.columns -->
				

				<div class="medium-2 columns text-center"><a class="button small radius expand" href="http://localhost:4000//release-notes-2022-cloudnative-security/" title="">BACK</a></div><!-- /.small-4.columns -->
				
				
				<div class="medium-5 columns text-right"><a class="button small radius next" href="/release-notes-2022-cloudnative-security/cloudnative-security-release-notes-202207/">7월 OCI Cloud Native & Security 업데이트 소식 &raquo;</a></div><!-- /.small-4.columns -->
				
			</div>
			
			</div><!--  /.page-meta -->

			

			
						
				<h3 id="comments" class="t60">Dialogue &amp; Discussion</h3>
			    <div id="disqus_thread"></div>
			    <script type="text/javascript">
			        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			        var disqus_shortname = 'the-team-oasis-github-io'; 
			        var disqus_identifier = '/release-notes-2022-cloudnative-security/cloudnative-security-release-notes-202206/';

			        /* * * DON'T EDIT BELOW THIS LINE * * */
			        (function() {
			            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			        })();
			    </script>
			    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			



			
		</article>
	</div><!-- /.medium-12.columns -->
</div><!-- /.row -->




	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      
      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="small-12 medium-6 columns credits">
            <p>Created with &hearts; by OASIS.</p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns">
            <ul class="inline-list social-icons">
            
              <li><a href="http://github.com/the-team-oasis" target="_blank" class="icon-github" title="Code und mehr..."></a></li>
            
              <li><a href="https://www.youtube.com/channel/UC60OcDzeEtn194-UPYNJs8A" target="_blank" class="icon-youtube" title="OCI Youtube"></a></li>
            
              <li><a href="https://twitter.com/oraclecloud" target="_blank" class="icon-twitter" title="OCI Twitter"></a></li>
            
              <li><a href="http://cloud.oracle.com" target="_blank" class="icon-cloud" title="OCI Home"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	


<script src="http://localhost:4000//assets/js/javascript.min.js"></script>













	<script src="http://localhost:4000//assets/js/copy-code-button.js"></script>
</body>
</html>

