<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>OCI Certificates - OCI 인증서 서비스에 등록한 인증서를 Application Load Balancer에 적용하기</title>

    <link rel="stylesheet" type="text/css" href="http://localhost:4000//assets/css/styles_feeling_responsive.css">

  

	<script src="http://localhost:4000//assets/js/modernizr.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
	<script>
		WebFont.load({
			google: {
				families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ]
			}
		});
	</script>

	<noscript>
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7CVolkhov' rel='stylesheet' type='text/css'>
	</noscript>


	<!-- Search Engine Optimization -->
	<meta name="description" content="OCI 인증서 서비스에 등록된 인증서를 Application Load Balancer에 적용하는 방법에 대해 알아봅니다">
	<meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ">
	<meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" >
	
	
	
	<link rel="canonical" href="http://localhost:4000//cloudnative/oci-certificate-with-lb/">


	<!-- Facebook Open Graph -->
	<meta property="og:title" content="OCI Certificates - OCI 인증서 서비스에 등록한 인증서를 Application Load Balancer에 적용하기">
	<meta property="og:description" content="OCI 인증서 서비스에 등록된 인증서를 Application Load Balancer에 적용하는 방법에 대해 알아봅니다">
	<meta property="og:url" content="http://localhost:4000//cloudnative/oci-certificate-with-lb/">
	<meta property="og:locale" content="en_EN">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="OASIS's Technical Blog">
	
	<meta property="article:author" content="https://www.facebook.com/phlow.media">


	
	<!-- Twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="phlow">
	<meta name="twitter:creator" content="phlow">
	<meta name="twitter:title" content="OCI Certificates - OCI 인증서 서비스에 등록한 인증서를 Application Load Balancer에 적용하기">
	<meta name="twitter:description" content="OCI 인증서 서비스에 등록된 인증서를 Application Load Balancer에 적용하는 방법에 대해 알아봅니다">
	
	

	<link type="text/plain" rel="author" href="http://localhost:4000//humans.txt">

	

	

	<link rel="icon" sizes="32x32" href="http://localhost:4000/assets/img/favicon-32x32.png">

	<link rel="icon" sizes="192x192" href="http://localhost:4000/assets/img/touch-icon-192x192.png">

	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://localhost:4000/assets/img/apple-touch-icon-180x180-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/assets/img/apple-touch-icon-152x152-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/apple-touch-icon-144x144-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/assets/img/apple-touch-icon-120x120-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/apple-touch-icon-114x114-precomposed.png">

	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/assets/img/apple-touch-icon-76x76-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/apple-touch-icon-72x72-precomposed.png">

	<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/assets/img/apple-touch-icon-precomposed.png">	

	<meta name="msapplication-TileImage" content="http://localhost:4000/assets/img/msapplication_tileimage.png">

	<meta name="msapplication-TileColor" content="#fabb00">


	

	
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-XPHZDWLS3K"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-XPHZDWLS3K');
	</script>
	


</head>
<body id="top-of-page" class="page-fullwidth">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar data-options="scrolltop: false">
    <ul class="title-area">
      <li class="name">
      <h1 class="hide-for-large-up"><a href="http://localhost:4000/" class="icon-tree"> OASIS's Technical Blog</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar toggle-topbar-click menu-icon"><a><span>Nav</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="left">
        

              

          
          

            
            
              <li><a  href="http://localhost:4000//">HOME</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://localhost:4000//blog">BLOG</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="http://localhost:4000//categories/">CATEGORIES</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="http://localhost:4000//getting-started/">Getting Started</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//infrastructure/">Infrastructure</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//cloudnative/">Cloud Native</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//database/">Data Platform</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//aiml/">AI/ML</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//security/">Security</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="http://localhost:4000//release-notes-2022/">Release Notes (2022)</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="http://localhost:4000//release-notes-2022-infrastructure/">Infrastructure</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//release-notes-2022-cloudnative-security/">Cloud Native &amp; Security</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//release-notes-2022-database">Data Platform</a></li>
                    

                      

                      <li><a  href="http://localhost:4000//release-notes-2022-aiml/">AI/ML</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          
        

              

          
          
        
        
      </ul>
      
      

      <ul class="right">
        

              



          
          
        

              



          
          
        

              



          
          
        

              



          
          
        

              



          
          
            
            
              <li class="divider"></li>
              <li><a  href="http://localhost:4000//learning/">Learning</a></li>

            
            
          
        

              



          
          
            
            
              <li class="divider"></li>
              <li><a  href="http://localhost:4000//search/">Search</a></li>

            
            
          
        
        
      </ul>
     
    </section>
  </nav>
</div><!-- /#navigation -->

	

	




<nav class="breadcrumbs" role="menubar" aria-label="breadcrumbs">
 <a href="http://localhost:4000/">HOME</a>
 
   
    
        <a href="http://localhost:4000//cloudnative/">cloudnative</a>
    
  
    
        <a class="current">OCI Certificates - OCI 인증서 서비스에 등록한 인증서를 Application Load Balancer에 적용하기</a>
    
  
</nav>




	


<div class="row t30">
	<div class="medium-12 columns">
		<article>
			<header>
				<p class="subheadline">CloudNative</p>
				<h1>OCI Certificates - OCI 인증서 서비스에 등록한 인증서를 Application Load Balancer에 적용하기</h1>
			</header>

			
			<p class="teaser">
				OCI 인증서 서비스에 등록된 인증서를 Application Load Balancer에 적용하는 방법에 대해 알아봅니다
			</p>
			

			<div class="panel radius">
  <p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#oci-certificates-소개" id="markdown-toc-oci-certificates-소개">OCI Certificates 소개</a></li>
  <li><a href="#lets-encrypt-인증서-발급-안내" id="markdown-toc-lets-encrypt-인증서-발급-안내">Let’s Encrypt 인증서 발급 안내</a></li>
  <li><a href="#oci-인증서를-oci-load-balancerapplication에-적용-실습-안내" id="markdown-toc-oci-인증서를-oci-load-balancerapplication에-적용-실습-안내">OCI 인증서를 OCI Load Balancer(Application)에 적용 실습 안내</a>    <ul>
      <li><a href="#사전-준비-사항" id="markdown-toc-사전-준비-사항">사전 준비 사항</a></li>
      <li><a href="#실습-순서" id="markdown-toc-실습-순서">실습 순서</a></li>
      <li><a href="#1-실습-compartment-생성" id="markdown-toc-1-실습-compartment-생성">1. 실습 Compartment 생성</a></li>
      <li><a href="#2-실습-virtual-cloud-networkvcn-생성" id="markdown-toc-2-실습-virtual-cloud-networkvcn-생성">2. 실습 Virtual Cloud Network(VCN) 생성</a></li>
      <li><a href="#3-compute-instance-생성-및-웹서버-설치" id="markdown-toc-3-compute-instance-생성-및-웹서버-설치">3. Compute Instance 생성 및 웹서버 설치</a>        <ul>
          <li><a href="#task-1-compute-instance-생성" id="markdown-toc-task-1-compute-instance-생성">Task 1: Compute Instance 생성</a></li>
          <li><a href="#task-2-compute-instance-접속" id="markdown-toc-task-2-compute-instance-접속">Task 2: Compute Instance 접속</a></li>
          <li><a href="#task-3-oci-보안목록-security-list-설정" id="markdown-toc-task-3-oci-보안목록-security-list-설정">Task 3: OCI 보안목록 (Security List) 설정</a></li>
          <li><a href="#task-4-apache-httpd-서버-설치-및-접속-확인" id="markdown-toc-task-4-apache-httpd-서버-설치-및-접속-확인">Task 4: Apache httpd 서버 설치 및 접속 확인</a></li>
        </ul>
      </li>
      <li><a href="#4-application-load-balancer-생성-및-설정하기" id="markdown-toc-4-application-load-balancer-생성-및-설정하기">4. Application Load Balancer 생성 및 설정하기</a></li>
      <li><a href="#5-oci-dns-서비스에서-record-생성하기" id="markdown-toc-5-oci-dns-서비스에서-record-생성하기">5. OCI DNS 서비스에서 Record 생성하기</a></li>
      <li><a href="#6-도메인을-접속-및-인증서-적용-확인" id="markdown-toc-6-도메인을-접속-및-인증서-적용-확인">6. 도메인을 접속 및 인증서 적용 확인</a></li>
      <li><a href="#7-oci-로드밸런서에서-http---https-리다이렉트-구성하기" id="markdown-toc-7-oci-로드밸런서에서-http---https-리다이렉트-구성하기">7. OCI 로드밸런서에서 http - https 리다이렉트 구성하기</a>        <ul>
          <li><a href="#task-1-oci-로드밸런서-http-리스너-생성-및-접속-테스트" id="markdown-toc-task-1-oci-로드밸런서-http-리스너-생성-및-접속-테스트">Task 1: OCI 로드밸런서 http 리스너 생성 및 접속 테스트</a></li>
          <li><a href="#task-2-oci-로드밸런서-https-리다이렉트-규칙-집합-생성하기-url-재지정" id="markdown-toc-task-2-oci-로드밸런서-https-리다이렉트-규칙-집합-생성하기-url-재지정">Task 2: OCI 로드밸런서 https 리다이렉트 규칙 집합 생성하기 (URL 재지정)</a></li>
          <li><a href="#task-3-oci-로드밸런서-https-리다이렉트-규칙-적용-및-접속-테스트" id="markdown-toc-task-3-oci-로드밸런서-https-리다이렉트-규칙-적용-및-접속-테스트">Task 3: OCI 로드밸런서 https 리다이렉트 규칙 적용 및 접속 테스트</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#마무리-하며" id="markdown-toc-마무리-하며">마무리 하며…</a></li>
  <li><a href="#참고-자료" id="markdown-toc-참고-자료">참고 자료</a>    <ul>
      <li><a href="#참고-블로그" id="markdown-toc-참고-블로그">참고 블로그</a></li>
      <li><a href="#oracle-공식-문서" id="markdown-toc-oracle-공식-문서">Oracle 공식 문서</a></li>
      <li><a href="#인증서-서비스관련-포스팅" id="markdown-toc-인증서-서비스관련-포스팅">인증서 서비스관련 포스팅</a></li>
    </ul>
  </li>
</ul>

</div>

<h3 id="oci-certificates-소개">OCI Certificates 소개</h3>
<p>OCI Certificates 서비스를 처음 접하시거나 자세한 내용이 궁금하신 경우 아래 포스팅을 통해 서비스 내용을 확인해보세요.</p>
<blockquote>
  <p><a href="/cloudnative/oci-certificate-overview/" target="_blank" rel="noopener">OCI Certificates 서비스 살펴보기</a></p>
</blockquote>

<h3 id="lets-encrypt-인증서-발급-안내">Let’s Encrypt 인증서 발급 안내</h3>
<p>Let’s Encrypt 인증서 발급 방법 및 OCI 인증서 서비스에 등록하기 위한 자세한 내용이 궁금하신 경우 아래 포스팅을 통해 서비스 내용을 확인해보세요.</p>
<blockquote>
  <p><a href="/cloudnative/oci-certificate-import-letsencrypt-cert/" target="_blank" rel="noopener">OCI Certificates - Let’s Encrypt로 생성한 인증서를 OCI 인증서 서비스에 Import 하기</a></p>
</blockquote>

<h3 id="oci-인증서를-oci-load-balancerapplication에-적용-실습-안내">OCI 인증서를 OCI Load Balancer(Application)에 적용 실습 안내</h3>
<p>이전 포스팅 (Let’s Encrypt)의 내용을 성공적으로 진행하셨다면, 등록한 인증서를 OCI 서비스중 LB에 연결하기 위한 과정을 소개하기 위한 내용을 준비하였습니다.
일반적인 VM위에 웹서버를 설치하고 간단한 페이지를 생성한 후 LB를 생성하여 SSL 도메인 인증서를 적용하는 실습을 진행합니다.
마지막으로 http로 호출한 요청을 https로 리다이렉트하는 설정 방법을 소개 드릴 예정입니다.</p>

<h4 id="사전-준비-사항">사전 준비 사항</h4>
<ul>
  <li>Public Domain 구입</li>
  <li>Let’s Encrypt 인증서 발급</li>
  <li>OCI 인증서 서비스에 인증서 등록</li>
</ul>

<h4 id="실습-순서">실습 순서</h4>
<ol>
  <li>실습 Compartment 생성</li>
  <li>실습 Virtual Cloud Network(VCN) 생성</li>
  <li>Compute Instance 생성 및 웹서버 설치</li>
  <li>Application Load Balancer 생성 및 설정하기</li>
  <li>OCI DNS 서비스에서 Record 생성하기</li>
  <li>도메인을 접속 및 인증서 적용 확인</li>
  <li>OCI 로드밸런서에서 http - https 리다이렉트 구성하기</li>
</ol>

<h4 id="1-실습-compartment-생성">1. 실습 Compartment 생성</h4>
<ol>
  <li>좌측 상단의 <strong>햄버거 아이콘</strong>을 클릭하고, <strong>ID &amp; 보안(Identity &amp; Security)</strong>을 선택한 후 <strong>구획(Compartments)</strong>을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compartment.png" alt="" title=" " /></li>
  <li>이동한 화면에서 “구획 생성” 버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compartment-create-1.png" alt="" title=" " /></li>
  <li>다음과 같이 입력하여 실습 구획을 생성합니다.
    <ul>
      <li>Name: Enter <strong>oci-demo</strong></li>
      <li>Description: <strong>OCI 실습 진행을 위한 구획입니다.</strong></li>
      <li>Parent Compartment: <strong>루트 구획 또는 특정 구획 선택</strong></li>
      <li><strong>구획 생성(Create Compartment)</strong> 클릭</li>
    </ul>

    <p><img src="/assets/img/cloudnative/2023/certificate-lb/oci-compartment-create-2.png" alt="" title=" " /></p>
  </li>
</ol>

<h4 id="2-실습-virtual-cloud-networkvcn-생성">2. 실습 Virtual Cloud Network(VCN) 생성</h4>
<ol>
  <li>전체 메뉴를 클릭하여 <strong>“네트워킹”</strong> -&gt; <strong>“가상 클라우드 네트워크”</strong> 를 클릭하여 가상 클라우드 네트워크 메뉴로 이동합니다.
<img src="/assets/img/cloudnative/2022/opensearch/opensearch-3.png" alt="" title=" " /></li>
  <li><strong>“VCN 마법사 시작”</strong> 버튼을 클릭하여 <strong>“인터넷 접속을 통한 VCN 생성”</strong> 을 선택 후 <strong>“VCN 마법사 시작”</strong> 버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2022/opensearch/opensearch-4.png" alt="" title=" " />
<img src="/assets/img/cloudnative/2022/opensearch/opensearch-5.png" alt="" title=" " /></li>
  <li>다음과 같이 입력하여 VCN을 생성합니다.
    <ul>
      <li>VCN 이름 : <strong>my-vcn</strong></li>
      <li>구획 : 1단계에서 생성한 구획으로 지정합니다. oci-demo</li>
      <li>“다음” 버튼 클릭하여 내용 확인 후 “생성” 버튼 클릭하여 VCN 생성</li>
    </ul>

    <p><img src="/assets/img/cloudnative/2022/opensearch/opensearch-6.png" alt="" title=" " />
<img src="/assets/img/cloudnative/2022/opensearch/opensearch-7.png" alt="" title=" " /></p>
  </li>
</ol>

<h4 id="3-compute-instance-생성-및-웹서버-설치">3. Compute Instance 생성 및 웹서버 설치</h4>
<h5 id="task-1-compute-instance-생성">Task 1: Compute Instance 생성</h5>
<ol>
  <li>
    <p>좌측 상단의 <strong>햄버거 아이콘</strong>을 클릭하고, <strong>컴퓨트(Compute)</strong>을 선택한 후 <strong>인스턴스(Instances)</strong>를 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-instance.png" alt="" title=" " /></p>
  </li>
  <li>
    <p>왼쪽 하단에 구획을 확인하고 <strong>인스턴스 생성(Create instance)</strong>버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-instance-create-1.png" alt="" title=" " /></p>
  </li>
  <li>인스턴스 이름과 구획을 선택 합니다
    <ul>
      <li>이름: Enter <strong>demoWebserver</strong></li>
      <li>구획에 생성: <strong>oci-demo</strong></li>
      <li>가용성 도메인 : <strong>AP-SEOUL-1-AD-1 (Seoul 리전 기준)</strong>
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-instance-create-2.png" alt="" title=" " /></li>
    </ul>
  </li>
  <li>설치할 이미지와 Instance의 Shape을 선택 합니다.
    <ul>
      <li>Image : <strong>Oracle Linux8 - 2022.12.15-0</strong></li>
      <li>Shape : <strong>VM.Standard.E4.Flex (1 OCPU, 16 GB Memory)</strong>
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-instance-create-3.png" alt="Compute Create #2" title=" " /></li>
    </ul>
  </li>
  <li>네트워크 관련 옵션을 선택 합니다
    <ul>
      <li>Virtual cloud network : <strong>my-vcn</strong></li>
      <li>Subnet : <strong>공용 서브넷-my-vcn</strong></li>
      <li>Public IP address : <strong>공용 IPv4 주소 지정</strong>
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-instance-create-4.png" alt="Compute Create #3" title=" " /></li>
    </ul>
  </li>
  <li>VM에 접속할때 사용할 SSH Keys 추가 합니다.
    <ul>
      <li>이번 실습에서는 <strong>자동으로 키 쌍 생성</strong> 를 선택 후 전용 키, 공용 키를 다운받아 잘 보관 합니다.</li>
      <li>Boot volume 관련 옵션은 기본 설정을 유지 합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-instance-create-5.png" alt="Compute Create #4" title=" " /></li>
    </ul>
  </li>
  <li><strong>Create</strong> 버튼을 클릭 후 생성
    <ul>
      <li>생성 후 Running 상태를 확인 합니다
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-instance-create-6.png" alt="Compute Create #6" title=" " /></li>
    </ul>
  </li>
</ol>

<h5 id="task-2-compute-instance-접속">Task 2: Compute Instance 접속</h5>

<ul>
  <li>Windows 사용자 (PuttyGen , Putty 사용)
    <ul>
      <li>PuTTYgen을 실행합니다</li>
      <li><strong>Load</strong> 를 클릭 하고 인스턴스를 생성할 때 생성된 프라이빗 키를 선택합니다. 키 파일의 확장자는 <strong>.key</strong></li>
      <li><strong>Save Private Key</strong> 를 클릭 합니다.</li>
      <li>키파일의 이름을 지정 합니다. (개인 키의 확장자는 <strong>.ppk</strong>로 저장합니다)</li>
      <li><strong>Save</strong> 를 클릭합니다.</li>
      <li>새로운 키 파일을 이용하여 인스턴스에 접속 합니다.</li>
      <li>상세내용은 링크를 통해 확인 가능 합니다. <a href="https://docs.oracle.com/en-us/iaas/Content/Compute/Tasks/accessinginstance.htm#linux__putty">접속 가이드 링크</a></li>
    </ul>
  </li>
  <li>MacOS 사용자
    <ul>
      <li>다운로드 받은 키파일의 권한을 조정합니다.
        <div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   chmod 400 &lt;private_key_file&gt;</span><span class="w"> </span><span class="c">#엑세스 하려는 키 파일의 전체 경로 와 이름을 입력합니다.</span>
</code></pre></div>        </div>
      </li>
      <li>다음 명령어를 입력하여 인스턴스에 접속합니다.
        <div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   ssh -i &lt;private_key_file&gt;</span><span class="w"> </span>opc@&lt;public-ip-address&gt;
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h5 id="task-3-oci-보안목록-security-list-설정">Task 3: OCI 보안목록 (Security List) 설정</h5>

<ol>
  <li>
    <p>VCN 목록에서 생성한 <strong>my-vcn</strong>을 클릭 상세보기 창으로 이동합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-vcn-security-list-create-1.png" alt="VCN Screen" title=" " /></p>
  </li>
  <li>
    <p>VCN 상세보기 화면에서 하단 Subnet 목록중 <strong>공용 서브넷-my-vcn</strong>을 클릭 합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-vcn-security-list-create-2.png" alt="VCN Screen" title=" " /></p>
  </li>
  <li>
    <p>Subnet 상세보기 화면에서 하단 Security Lists 목록중 <strong>Default Security List for my-vcn</strong>을 클릭 합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-vcn-security-list-create-3.png" alt="VCN Screen" title=" " /></p>
  </li>
  <li>
    <p><strong>수신 규칙 추가</strong> 버튼을 클릭 합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-vcn-security-list-create-4.png" alt="VCN Screen" title=" " /></p>
  </li>
  <li>
    <p>다음과 같이 입력:</p>
    <ul>
      <li>Source Type : <strong>CIDR</strong> (기본값)</li>
      <li>Source CIDR : Enter <strong>0.0.0.0/0</strong></li>
      <li>IP Protocol : <strong>TCP</strong> (기본값)</li>
      <li>Destination Port Range : <strong>80, 443</strong></li>
      <li>Description : <strong>httpd 실습을 위한 http, https 서비스 Port 허용 정책</strong></li>
      <li><strong>수신 규칙 추가</strong> 클릭
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-vcn-security-list-create-5.png" alt="VCN Screen" title=" " /></li>
    </ul>
  </li>
</ol>

<h5 id="task-4-apache-httpd-서버-설치-및-접속-확인">Task 4: Apache httpd 서버 설치 및 접속 확인</h5>
<ol>
  <li>Install Apache httpd 서버
    <div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">      sudo yum install httpd -y
</span></code></pre></div>    </div>
  </li>
  <li>Apache 서버 시작 및 재부팅시 자동으로 서비스가 활성화 되도록 설정 합니다.
    <div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">      sudo apachectl start
      sudo systemctl enable httpd
</span></code></pre></div>    </div>
  </li>
  <li>Apache 설정 테스트 명령을 실행합니다.
    <div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">      sudo apachectl configtest
</span></code></pre></div>    </div>
  </li>
  <li>아래 명령어를 입력하여 웹 브라우저에서 확인할 index.html 파일을 생성합니다.
    <div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">      sudo bash -c 'echo This is my Web-Server running on Oracle Cloud Infrastructure &gt;</span><span class="o">&gt;</span> /var/www/html/index.html<span class="s1">'
</span></code></pre></div>    </div>

    <p><img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-install-httpd.png" alt="install Apache httpd server" title=" " /></p>
  </li>
  <li>OS 방화벽 사용 해제
기본으로 OS에 적용되어 있는 방화벽을 중지 시키기 위해 아래 명령어를 순차적으로 입력 합니다.
    <div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   sudo systemctl disable firewalld
   sudo systemctl stop firewalld
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>웹서버 접속 및 응답 확인
인스턴스의 공용 IP로 접속하여 생성한 index.html파일의 내용을 브라우저에서 확인합니다.</p>

    <p><img src="/assets/img/cloudnative/2023/certificate-lb/oci-compute-install-httpd-2.png" alt="install Apache httpd server" title=" " /></p>
  </li>
</ol>

<h4 id="4-application-load-balancer-생성-및-설정하기">4. Application Load Balancer 생성 및 설정하기</h4>
<ol>
  <li>좌측 상단의 <strong>햄버거 아이콘</strong>을 클릭하고, <strong>네트워킹(Networking)</strong>을 선택한 후 <strong>로드 밸런서(Load Balancer)</strong>를 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-1.png" alt="Load Balancer Menu" title=" " /></li>
  <li>이동한 화면에서 현재 구획을 확인 후 <strong>로드 밸런서 생성</strong> 버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-2.png" alt="Load Balancer Create - 1" title=" " /></li>
  <li>로드 밸런서 유형 선택 화면에서 상단의 Layer-7 <strong>로드 밸런서</strong>를 선택 후 <strong>로드 밸런서 생성</strong> 버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-3.png" alt="Load Balancer Create - 2" title=" " /></li>
  <li>로드 밸런서 생성 화면에서 아래와 같이 입력 및 선택 합니다.
    <ul>
      <li>로드 밸런서 이름: <strong>lb_demo</strong></li>
      <li>가시성 유형 선택: <strong>공용</strong></li>
      <li>공용 IP 주소 지정 : <strong>임시 IP 주소</strong> / 예약된 IP 주소를 사용하려면 사전에 예약된 IP 생성 필요
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-4.png" alt="Load Balancer Create - 3" title=" " /></li>
    </ul>
  </li>
  <li>대역폭 구성은 기본값으로 구성합니다.
    <ul>
      <li><strong>최소/최대 10Mbps</strong>)</li>
      <li>가상 클라우드 네트워크: <strong>vcn-oci-basic</strong></li>
      <li>가시성 유형 선택: <strong>공용 서브넷-vcn-oci-basic</strong></li>
      <li><strong>다음</strong> 버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-5.png" alt="Load Balancer Create - 1" title=" " /></li>
    </ul>
  </li>
  <li>백엔드 선택 단계에서 아래와 같이 선택합니다.
    <ul>
      <li>로드 밸런싱 정책 지정: <strong>라운드 로빈(가중치 사용)</strong></li>
    </ul>
  </li>
  <li><strong>백엔드 추가</strong> 버튼을 클릭하여 전단계에서 생성한 인스턴스를 선택합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-6.png" alt="Load Balancer Create - 1" title=" " /></li>
  <li>건정성 검사 정책 지정 단계에서는 기본값을 그대로 사용 합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-7.png" alt="Load Balancer Create - 1" title=" " /></li>
  <li>리스너 구성 화면에서 아래와 같이 입력 및 선택 합니다.
    <ul>
      <li>리스너 이름: <strong>기본값 사용</strong></li>
      <li>리스너가 처리하는 트래픽의 유형 지정: <strong>HTTPS</strong></li>
      <li>수신 트래픽에 대해 리스너가 모니터하는 포트 지정: <strong>443</strong></li>
      <li>SSL 인증서 섹션
        <ul>
          <li>인증서 리소스 : 인증서 서비스 관리 인증서</li>
          <li>[구획]의 인증서 : Let’s Encrypt로 생성하고 등록한 인증서 선택</li>
        </ul>
      </li>
      <li><strong>다음</strong> 버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-8.png" alt="Load Balancer Create - 1" title=" " /></li>
    </ul>
  </li>
  <li>로깅 관리 설정 단계에서 아래와 같이 오류 &amp; 엑세스 로그를 모두 사용함으로 설정하고 <strong>제출</strong> 버튼을 클릭하여 Load Balancer를 생성합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-9.png" alt="Load Balancer Create - 1" title=" " /></li>
  <li>확인한 공용 IP로 웹브라우저를 통해 접속을 확인합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-loadbalancer-10.png" alt="Load Balancer Create - 1" title=" " /></li>
</ol>

<h4 id="5-oci-dns-서비스에서-record-생성하기">5. OCI DNS 서비스에서 Record 생성하기</h4>
<ol>
  <li>좌측 상단의 <strong>햄버거 아이콘</strong>을 클릭하고, <strong>네트워킹(Networking)</strong>을 선택한 후 <strong>DNS관리</strong>를 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-certificate-dns.png" alt="" title=" " /></li>
  <li>DNS관리에서 기존에 생성한 영역을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-certificate-dns-1.png" alt="" title=" " /></li>
  <li><strong>“레코드 추가”</strong> 버튼을 클릭합니다
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-certificate-dns-2.png" alt="" title=" " /></li>
  <li>아래와 같이 선택 및 입력 하여 레코드를 추가합니다.
    <ul>
      <li>레코드 유형 : <strong>A - IPv4 주소</strong></li>
      <li>이름 : demosite</li>
      <li>TTL : 30 , 단위 : 초</li>
      <li>Rdata 모드 : 기본</li>
      <li>Address(주소) : <mark>로드 밸런서의 Public IP 주소를 등록합니다.</mark> // 129.154.205.69
  <img src="/assets/img/cloudnative/2023/certificate-lb/oci-certificate-dns-3.png" alt="" title=" " /></li>
    </ul>
  </li>
  <li><strong>“변경사항 게시”</strong> 버튼을 클릭하여 생성한 레코드를 게시합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-certificate-dns-4.png" alt="" title=" " /></li>
</ol>

<h4 id="6-도메인을-접속-및-인증서-적용-확인">6. 도메인을 접속 및 인증서 적용 확인</h4>
<ol>
  <li>생성한 레코드가 적용되기 위해 1~2분을 기다려 줍니다.</li>
  <li>생성한 도메인을 브라우저에서 입력하여 접속합니다.</li>
  <li>정상적으로 접속됨을 확인합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-certificate-dns-5.png" alt="" title=" " /></li>
  <li>인증서도 정상적으로 적용된것을 확인할 수 있습니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-certificate-dns-6.png" alt="" title=" " /></li>
</ol>

<h4 id="7-oci-로드밸런서에서-http---https-리다이렉트-구성하기">7. OCI 로드밸런서에서 http - https 리다이렉트 구성하기</h4>

<h5 id="task-1-oci-로드밸런서-http-리스너-생성-및-접속-테스트">Task 1: OCI 로드밸런서 http 리스너 생성 및 접속 테스트</h5>
<ol>
  <li>http 리스너를 추가로 생성하기 위해 (4) 단계에서 생성한 로드밸런서 세부정보 화면으로 이동합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-1.png" alt="" title=" " /></li>
  <li>좌측 하단 리소스 패널에서 “리스너”를 클릭하고 “리스너 생성” 버튼을 클릭하여 아래와 같이 입력 및 선택하여 리스너를 생성합니다.
    <ul>
      <li>이름 : <strong>listener_http</strong></li>
      <li>프로토콜 : <strong>HTTP</strong></li>
      <li>포트 : <strong>80</strong></li>
      <li>백엔드 집합 : <strong>기존에 생성되어 있는 백엔드 집합 선택</strong></li>
      <li><mark>나머지 옵션을 입력하지 않습니다.</mark></li>
      <li><strong>“리스너 생성”</strong> 버튼 클릭하여 리스너를 생성합니다.</li>
    </ul>

    <p><img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-2.png" alt="" title=" " /></p>
  </li>
  <li>생성한 http 리스너로 접속하여 정상 접속 여부를 확인합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-3.png" alt="" title=" " /></li>
</ol>

<h5 id="task-2-oci-로드밸런서-https-리다이렉트-규칙-집합-생성하기-url-재지정">Task 2: OCI 로드밸런서 https 리다이렉트 규칙 집합 생성하기 (URL 재지정)</h5>
<ol>
  <li>로드밸런서 세부 화면에서 좌측 하단 리소스 패널에서 “규칙 집합”를 클릭하고 “규칙 집합 생성” 버튼을 클릭하여 아래와 같이 입력 및 선택하여 규칙 집합을 생성합니다
    <ul>
      <li>이름 : <strong>httpTohttps</strong></li>
      <li><strong>URL 재지정 규칙 지정</strong> 체크박스 선택</li>
      <li>소스 경로 : <strong>/</strong></li>
      <li>일치 유형 : <strong>강제로 가장 긴 접두어 일치</strong></li>
      <li>재지정 대상
        <ul>
          <li>프로토콜 : <strong>HTTPS</strong></li>
          <li>포트 : <strong>443</strong></li>
          <li><mark>다른 설정은 기본 값을 유지합니다.</mark></li>
        </ul>
      </li>
      <li>“생성” 버튼을 클릭하여 규칙 집합을 생성합니다.</li>
    </ul>

    <p><img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-4.png" alt="" title=" " /></p>
  </li>
</ol>

<h5 id="task-3-oci-로드밸런서-https-리다이렉트-규칙-적용-및-접속-테스트">Task 3: OCI 로드밸런서 https 리다이렉트 규칙 적용 및 접속 테스트</h5>
<ol>
  <li>http 리스너를 수정하기 위해 로드밸런서 세부정보 화면으로 이동합니다.</li>
  <li>좌측 하단 리소스 패널에서 “리스너”를 클릭하고 “listener_http” 리스너 우측의 “Action 버튼”을 클릭 후 “편집” 메뉴를 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-5.png" alt="" title=" " /></li>
  <li>하단 규칙 집합 섹션에서 “추가 규칙 집합” 버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-6.png" alt="" title=" " /></li>
  <li>생성한 “httpTohttps” 규칙 집합을 선택 후 “변경사항 저장” 버튼을 클릭합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-7.png" alt="" title=" " /></li>
  <li>설정이 적용된 후 브라우저에서 실제 redirect 과정을 확인합니다.
    <ul>
      <li>http 도메인으로 접속 후 개발자 도구에서 http 요청이 상태코드 <mark>[302 Moned Temporarily]</mark>로 리턴 받음을 확인합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-8.png" alt="" title=" " /></li>
      <li>OCI 로드밸런서 리스너에 지정한 규칙 집합에 의해 https로 redirect 되었고 <mark>[302 OK]</mark>로 리턴 받음을 확인합니다.
<img src="/assets/img/cloudnative/2023/certificate-lb/oci-lb-redirect-9.png" alt="" title=" " /></li>
    </ul>
  </li>
</ol>

<h3 id="마무리-하며">마무리 하며…</h3>
<p>이번 포스팅에서는 OCI 인증서 서비스에 등록된 인증서를 OCI 로드밸런서에 연결하는 실습을 진행했습니다.
OCI 인증서 서비스를 사용하면 OCI 로드밸런서, API Gateway 서비스와 인증서를 손쉽게 통합할 수 있으며 인증서의 버전관리, 갱신을 편리하게 처리할 수 있습니다.
다음에는 OCI 인증서 서비스를 OCI API Gateway 서비스에 통합하는 과정도 살펴볼 예정입니다.
아래 인증서 서비스관련 포스팅의 링크를 참조하세요.</p>

<h3 id="참고-자료">참고 자료</h3>

<h4 id="참고-블로그">참고 블로그</h4>
<ul>
  <li><a href="https://blogs.oracle.com/cloud-infrastructure/post/http-url-redirect-on-oracle-cloud-infrastructure" target="_blank" rel="noopener">https://blogs.oracle.com/cloud-infrastructure/post/http-url-redirect-on-oracle-cloud-infrastructure</a></li>
</ul>

<h4 id="oracle-공식-문서">Oracle 공식 문서</h4>
<ul>
  <li><a href="https://docs.oracle.com/en-us/iaas/Content/certificates/home.htm" target="_blank" rel="noopener">https://docs.oracle.com/en-us/iaas/Content/certificates/home.htm</a></li>
  <li><a href="https://www.oracle.com/security/cloud-security/ssl-tls-certificates/" target="_blank" rel="noopener">https://www.oracle.com/security/cloud-security/ssl-tls-certificates/</a></li>
  <li><a href="https://www.oracle.com/security/cloud-security/ssl-tls-certificates/faq/" target="_blank" rel="noopener">https://www.oracle.com/security/cloud-security/ssl-tls-certificates/faq/</a></li>
</ul>

<h4 id="인증서-서비스관련-포스팅">인증서 서비스관련 포스팅</h4>
<ul>
  <li><a href="/cloudnative/oci-certificate-import-letsencrypt-cert/" target="_blank" rel="noopener">OCI Certificates - Let’s Encrypt로 생성한 인증서를 OCI 인증서 서비스에 Import 하기</a></li>
  <li>OCI 인증서를 API Gateway에 적용하기</li>
  <li>OCI 인증서 서비스의 인증기관 생성 및 Load Balancer 적용하기</li>
</ul>

			
			
						<div id="page-meta" class="t30">
				<p>
					<!-- Look the author details up from the site config. -->
					
					<!-- Output author details if some exist. -->
					
					<span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="pr20 icon-edit"><a href="" target="_blank"> Young Hwan</a></span>
				</span>
				

				
				<time class="icon-calendar pr20" datetime="2023-01-03T00:00:00+09:00" itemprop="datePublished"> 2023-01-03</time>
				

				<span class="icon-archive pr20"> CLOUDNATIVE</span>
				<br />
				<span class="pr20"><span class="icon-price-tag pr10"> oci</span> <span class="icon-price-tag pr10"> certificates</span> <span class="icon-price-tag pr10"> load balancer</span> <span class="icon-price-tag pr10"> lb</span> <span class="icon-price-tag pr10"> application load balancer</span> <span class="icon-price-tag pr10"> ssl</span> <span class="icon-price-tag pr10"> l7</span> <span class="icon-price-tag pr10"> oci certificate</span> <span class="icon-price-tag pr10"> oci loadbalancer</span> <span class="icon-price-tag pr10"> loadbalancer</span> </span>
			</p>

			
			<div id="post-nav" class="row">
				

				
				<div class="medium-5 columns"><a class="button small radius prev" href="/cloudnative/oci-certificate-import-letsencrypt-cert/">&laquo; OCI Certificates - Let’s Encrypt로 생성한 인증서를 OCI 인증서 서비스에 Import 하기</a></div><!-- /.small-4.columns -->
				

				<div class="medium-2 columns text-center"><a class="button small radius expand" href="http://localhost:4000//cloudnative/" title="">BACK</a></div><!-- /.small-4.columns -->
				
				
				<div class="medium-5 columns text-right"></div><!-- /.small-4.columns -->
				
			</div>
			
			</div><!--  /.page-meta -->

			

			
						
				<h3 id="comments" class="t60">Dialogue &amp; Discussion</h3>
			    <div id="disqus_thread"></div>
			    <script type="text/javascript">
			        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			        var disqus_shortname = 'team-oasiss-technical-blog'; 
			        var disqus_identifier = '/cloudnative/oci-certificate-with-lb/';

			        /* * * DON'T EDIT BELOW THIS LINE * * */
			        (function() {
			            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			        })();
			    </script>
			    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			



			
		</article>
	</div><!-- /.medium-12.columns -->
</div><!-- /.row -->




	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      
      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="small-12 medium-6 columns credits">
            <p>Created with &hearts; by OASIS.</p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns">
            <ul class="inline-list social-icons">
            
              <li><a href="http://github.com/the-team-oasis" target="_blank" class="icon-github" title="Code und mehr..."></a></li>
            
              <li><a href="https://www.youtube.com/channel/UC60OcDzeEtn194-UPYNJs8A" target="_blank" class="icon-youtube" title="OCI Youtube"></a></li>
            
              <li><a href="https://twitter.com/oraclecloud" target="_blank" class="icon-twitter" title="OCI Twitter"></a></li>
            
              <li><a href="http://cloud.oracle.com" target="_blank" class="icon-cloud" title="OCI Home"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	


<script src="http://localhost:4000//assets/js/javascript.min.js"></script>













	<script src="http://localhost:4000//assets/js/copy-code-button.js"></script>
</body>
</html>

