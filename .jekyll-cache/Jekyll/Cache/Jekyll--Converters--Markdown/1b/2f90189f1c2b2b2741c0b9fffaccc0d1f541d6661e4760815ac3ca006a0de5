I"ºÑ<div class="panel radius">
  <p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#streamtopic-êµ¬ì„±" id="markdown-toc-streamtopic-êµ¬ì„±">Stream(Topic) êµ¬ì„±</a>    <ul>
      <li><a href="#streamtopic-ìƒì„±" id="markdown-toc-streamtopic-ìƒì„±">Stream(Topic) ìƒì„±</a></li>
      <li><a href="#stream-pool-stream-group-ë°-kafka-ì ‘ì†-ì •ë³´" id="markdown-toc-stream-pool-stream-group-ë°-kafka-ì ‘ì†-ì •ë³´">Stream Pool (Stream Group) ë° Kafka ì ‘ì† ì •ë³´</a></li>
      <li><a href="#auth-token-ìƒì„±" id="markdown-toc-auth-token-ìƒì„±">Auth Token ìƒì„±</a></li>
    </ul>
  </li>
  <li><a href="#flink-í™˜ê²½-êµ¬ì„±" id="markdown-toc-flink-í™˜ê²½-êµ¬ì„±">Flink í™˜ê²½ êµ¬ì„±</a>    <ul>
      <li><a href="#flink-ì„¤ì¹˜" id="markdown-toc-flink-ì„¤ì¹˜">Flink ì„¤ì¹˜</a></li>
      <li><a href="#flink-í´ëŸ¬ìŠ¤í„°-ì‹¤í–‰" id="markdown-toc-flink-í´ëŸ¬ìŠ¤í„°-ì‹¤í–‰">Flink í´ëŸ¬ìŠ¤í„° ì‹¤í–‰</a></li>
    </ul>
  </li>
  <li><a href="#flink-ì†Œë¹„ìconsumer" id="markdown-toc-flink-ì†Œë¹„ìconsumer">Flink ì†Œë¹„ì(Consumer)</a>    <ul>
      <li><a href="#flink-ì†Œë¹„ì-ì½”ë“œ-ì‘ì„±" id="markdown-toc-flink-ì†Œë¹„ì-ì½”ë“œ-ì‘ì„±">Flink ì†Œë¹„ì ì½”ë“œ ì‘ì„±</a></li>
      <li><a href="#ë¹Œë“œ-ë°-ì¡job-ì‹¤í–‰" id="markdown-toc-ë¹Œë“œ-ë°-ì¡job-ì‹¤í–‰">ë¹Œë“œ ë° ì¡(Job) ì‹¤í–‰</a></li>
    </ul>
  </li>
  <li><a href="#kafka-ìƒì‚°ì-producer" id="markdown-toc-kafka-ìƒì‚°ì-producer">Kafka ìƒì‚°ì (Producer)</a>    <ul>
      <li><a href="#kafka-ìƒì‚°ì-ì½”ë“œ-ì‘ì„±" id="markdown-toc-kafka-ìƒì‚°ì-ì½”ë“œ-ì‘ì„±">Kafka ìƒì‚°ì ì½”ë“œ ì‘ì„±</a></li>
      <li><a href="#ë¹Œë“œ-ë°-ìƒì‚°ì-ì‹¤í–‰" id="markdown-toc-ë¹Œë“œ-ë°-ìƒì‚°ì-ì‹¤í–‰">ë¹Œë“œ ë° ìƒì‚°ì ì‹¤í–‰</a></li>
    </ul>
  </li>
  <li><a href="#flink-job-task-í™•ì¸" id="markdown-toc-flink-job-task-í™•ì¸">Flink Job Task í™•ì¸</a></li>
  <li><a href="#ì†ŒìŠ¤-ê³µìœ " id="markdown-toc-ì†ŒìŠ¤-ê³µìœ ">ì†ŒìŠ¤ ê³µìœ </a></li>
  <li><a href="#ì°¸ê³ " id="markdown-toc-ì°¸ê³ ">ì°¸ê³ </a></li>
</ul>

</div>

<h3 id="streamtopic-êµ¬ì„±">Stream(Topic) êµ¬ì„±</h3>
<p>ìš°ì„  OCIì—ì„œ Streamì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ê³  Kafka ê´€ë ¨ ì ‘ì† ì •ë³´ë¥¼ ì–»ì–´ì•¼ í•©ë‹ˆë‹¤.</p>

<h4 id="streamtopic-ìƒì„±">Stream(Topic) ìƒì„±</h4>
<p>OCI Streaming Serviceì—ì„œ Stream(Topic)ì„ ìƒì„±í•˜ëŠ” ì ˆì°¨ëŠ” ê°„ë‹¨í•©ë‹ˆë‹¤. OCI ì½˜ì†”ì— ì ‘ì†í•œ í›„ <strong>ë©”ë‰´ &gt;Analytics &amp; AI &gt; ìŠ¤íŠ¸ë¦¬ë°(Streaming) &gt; ìŠ¤íŠ¸ë¦¼ ìƒì„±</strong> ê²½ë¡œë¡œ ì´ë™í•´ì„œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><img src="https://mangdan.github.io/assets/images/oci-create-streaming.png" alt="" /></p>

<h4 id="stream-pool-stream-group-ë°-kafka-ì ‘ì†-ì •ë³´">Stream Pool (Stream Group) ë° Kafka ì ‘ì† ì •ë³´</h4>
<p>Stream Poolì€ Streamì˜ Groupì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ìœ„ì—ì„œ ìƒì„±í•œ Streamì— ë³„ë„ì˜ Stream Poolì„ ì§€ì •í•˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ Stream Pool (DefaultPool)ì— í¬í•¨ë©ë‹ˆë‹¤. Stream Poolì„ ë³´ë©´ Stream Poolì— ì ‘ì†ì„ ìœ„í•œ Kafka ì„¤ì •ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ì •ë³´ë¥¼ ì´ìš©í•´ì„œ Kafka ë° Flink ì„¤ì •ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<ul>
  <li>ë¶€íŠ¸ ìŠ¤íŠ¸ë© ì„œë²„: cell-1.streaming.{Region-Code}.oci.oraclecloud.com:9092</li>
  <li>SASL ì ‘ì† ë¬¸ìì—´: org.apache.kafka.common.security.plain.PlainLoginModule required username=â€{í…Œë„Œì‹œëª…}/{OCI ê³„ì •}/{Stream Pool OCID}â€ * password=â€{AUTH_TOKEN}â€;</li>
  <li>ë³´ì•ˆ í”„ë¡œí† ì½œ: SASL_SSL</li>
  <li>ë³´ì•ˆ ë°©ì‹: PLAIN</li>
</ul>

<h4 id="auth-token-ìƒì„±">Auth Token ìƒì„±</h4>
<p>Kafka ì ‘ì† ì •ë³´ì—ì„œ í•„ìš”í•œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆì§€ë§Œ, ìì‹ ì˜ ê³„ì •ê³¼ ì—°ê´€ëœ AUTH_TOKENì€ ìƒì„±í•´ ì¤˜ì•¼í•©ë‹ˆë‹¤. ë‹¤ìŒ ìˆœì„œë¡œ í† í°ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<ul>
  <li>ìš°ì¸¡ ìƒë‹¨ í”„ë¡œíŒŒì¼ í´ë¦­ &gt; ê³„ì • ì„ íƒ &gt; ì¸ì¦ í† í° &gt; í† í° ìƒì„± &gt; ë³µì‚¬</li>
</ul>

<p><img src="https://mangdan.github.io/assets/images/oci-oss-create-token.png" alt="" /></p>

<h3 id="flink-í™˜ê²½-êµ¬ì„±">Flink í™˜ê²½ êµ¬ì„±</h3>
<p>Flink í™˜ê²½ì„ êµ¬ì„±í•˜ê³  ì†Œë¹„ì(Consumer)ë¥¼ ì‘ì„±í•˜ì—¬ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ë¡œì»¬ í´ëŸ¬ìŠ¤í„° í™˜ê²½ìœ¼ë¡œ êµ¬ì„±í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>

<h4 id="flink-ì„¤ì¹˜">Flink ì„¤ì¹˜</h4>
<p>ì„¤ì¹˜ëŠ” ì•„ë˜ ë§í¬ë¥¼ ì°¸ê³ í•©ë‹ˆë‹¤.<br />
<a href="https://ci.apache.org/projects/flink/flink-docs-release-1.9/getting-started/tutorials/local_setup.html">https://ci.apache.org/projects/flink/flink-docs-release-1.9/getting-started/tutorials/local_setup.html</a></p>

<p>MacOSì˜ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ HomeBrewë¥¼ í™œìš©í•˜ë©´ ì‰½ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>brew <span class="nb">install </span>apache-flink
<span class="go">
</span><span class="gp">$</span><span class="w"> </span>flink <span class="nt">--version</span>
</code></pre></div></div>

<h4 id="flink-í´ëŸ¬ìŠ¤í„°-ì‹¤í–‰">Flink í´ëŸ¬ìŠ¤í„° ì‹¤í–‰</h4>
<p>MacOSì—ì„œ HomeBrewë¡œ ì„¤ì¹˜í•œ ê²½ìš° ë³´í†µ /usr/local/Cellar/apache-flink/{ë²„ì „}ê³¼ ê°™ì€ ìœ„ì¹˜ì— ì„¤ì¹˜ë©ë‹ˆë‹¤. ì •í™•í•œ ê²½ë¡œ ìœ„ì¹˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ brew infoë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>brew info apache-flink
<span class="go">
apache-flink: stable 1.16.0, HEAD
Scalable batch and stream data processing
https://flink.apache.org/
/usr/local/Cellar/apache-flink/1.16.0 (174 files, 336MB) *
  Built from source on 2022-11-04 at 14:46:29
From: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/apache-flink.rb
License: Apache-2.0
</span><span class="gp">==&gt;</span><span class="w"> </span>Requirements
<span class="go">Required: java = 1.8 âœ”
</span><span class="gp">==&gt;</span><span class="w"> </span>Options
<span class="go">--HEAD
	Install HEAD version
</span><span class="gp">==&gt;</span><span class="w"> </span>Analytics
<span class="go">install: 713 (30 days), 2,253 (90 days), 13,079 (365 days)
install-on-request: 714 (30 days), 2,243 (90 days), 13,028 (365 days)
build-error: 0 (30 days)
</span></code></pre></div></div>

<p>ë‹¤ìŒê³¼ ê°™ì´ ì´ë™í•˜ì—¬ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd /usr/local/Cellar/apache-flink/1.16.0/libexec/bin

$ ./start-cluster.sh
</code></pre></div></div>

<p>ì´ì œ Flinkì—ì„œ ì œê³µí•˜ëŠ” ê´€ë¦¬ ì½˜ì†”ì— ì ‘ì†í•´ ë´…ë‹ˆë‹¤.</p>
<ul>
  <li>http://localhost:8081</li>
</ul>

<p><img src="https://mangdan.github.io/assets/images/oci-oss-flink-dashboard.png" alt="" /></p>

<h3 id="flink-ì†Œë¹„ìconsumer">Flink ì†Œë¹„ì(Consumer)</h3>
<p>FlinkëŠ” Javaì™€ Scalaë¥¼ í†µí•´ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ë©”ì´ë¸ í”„ë¡œì íŠ¸ì™€ Javaë¥¼ í™œìš©í•˜ì—¬ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

<h4 id="flink-ì†Œë¹„ì-ì½”ë“œ-ì‘ì„±">Flink ì†Œë¹„ì ì½”ë“œ ì‘ì„±</h4>
<p>FlinkëŠ” ìµœì‹  ë²„ì „ì¸ 1.16.0 ë²„ì „ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ Dependencyì™€ Maven Plugin ì„¤ì •ì„ í•©ë‹ˆë‹¤.</p>

<p><strong>pom.xml</strong></p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>com.example.app<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>oss-kafka-flink-consumer<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
	<span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;properties&gt;</span>
		<span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
		<span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
		<span class="nt">&lt;flink.version&gt;</span>1.16.0<span class="nt">&lt;/flink.version&gt;</span>
	<span class="nt">&lt;/properties&gt;</span>
	<span class="nt">&lt;dependencies&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.apache.flink<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>flink-connector-kafka<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>${flink.version}<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.apache.flink<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>flink-java<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>${flink.version}<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.apache.flink<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>flink-streaming-java<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>${flink.version}<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
	<span class="nt">&lt;/dependencies&gt;</span>
	<span class="nt">&lt;build&gt;</span>
		<span class="nt">&lt;plugins&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>maven-resources-plugin<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>3.2.0<span class="nt">&lt;/version&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>maven-shade-plugin<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>3.2.4<span class="nt">&lt;/version&gt;</span>
				<span class="nt">&lt;executions&gt;</span>
					<span class="c">&lt;!-- Run shade goal on package phase --&gt;</span>
					<span class="nt">&lt;execution&gt;</span>
						<span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
						<span class="nt">&lt;goals&gt;</span>
							<span class="nt">&lt;goal&gt;</span>shade<span class="nt">&lt;/goal&gt;</span>
						<span class="nt">&lt;/goals&gt;</span>
						<span class="nt">&lt;configuration&gt;</span>
							<span class="nt">&lt;artifactSet&gt;</span>
								<span class="nt">&lt;excludes&gt;</span>
									<span class="c">&lt;!-- This list contains all dependencies of flink-dist
									Everything else will be packaged into the fat-jar
									--&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-shaded-*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-core<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-java<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-scala<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-runtime<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-optimizer<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-clients<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-avro<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-java-examples<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-scala-examples<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-streaming-examples<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.flink:flink-streaming-java<span class="nt">&lt;/exclude&gt;</span>

									<span class="c">&lt;!-- Also exclude very big transitive dependencies of Flink
									WARNING: You have to remove these excludes if your code relies on other
									versions of these dependencies.
									--&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.scala-lang:scala-library<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.scala-lang:scala-compiler<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.scala-lang:scala-reflect<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.amazonaws:aws-java-sdk<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.typesafe.akka:akka-actor_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.typesafe.akka:akka-remote_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.typesafe.akka:akka-slf4j_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>io.netty:netty-all<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>io.netty:netty<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.eclipse.jetty:jetty-server<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.eclipse.jetty:jetty-continuation<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.eclipse.jetty:jetty-http<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.eclipse.jetty:jetty-io<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.eclipse.jetty:jetty-util<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.eclipse.jetty:jetty-security<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.eclipse.jetty:jetty-servlet<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>commons-fileupload:commons-fileupload<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.avro:avro<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>commons-collections:commons-collections<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.codehaus.jackson:jackson-core-asl<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.codehaus.jackson:jackson-mapper-asl<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.thoughtworks.paranamer:paranamer<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.xerial.snappy:snappy-java<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.commons:commons-compress<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.tukaani:xz<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.esotericsoftware.kryo:kryo<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.esotericsoftware.minlog:minlog<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.objenesis:objenesis<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.twitter:chill_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.twitter:chill-java<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.twitter:chill-avro_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.twitter:chill-bijection_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.twitter:bijection-core_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.twitter:bijection-avro_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>commons-lang:commons-lang<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>junit:junit<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>de.javakaffee:kryo-serializers<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>joda-time:joda-time<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.commons:commons-lang3<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.slf4j:slf4j-api<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.slf4j:slf4j-log4j12<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>log4j:log4j<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.commons:commons-math<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.sling:org.apache.sling.commons.json<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>commons-logging:commons-logging<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.httpcomponents:httpclient<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.apache.httpcomponents:httpcore<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>commons-codec:commons-codec<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.fasterxml.jackson.core:jackson-core<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.fasterxml.jackson.core:jackson-databind<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.fasterxml.jackson.core:jackson-annotations<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.codehaus.jettison:jettison<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>stax:stax-api<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.typesafe:config<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.uncommons.maths:uncommons-maths<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>com.github.scopt:scopt_*<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>org.mortbay.jetty:servlet-api<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>commons-io:commons-io<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;exclude&gt;</span>commons-cli:commons-cli<span class="nt">&lt;/exclude&gt;</span>
								<span class="nt">&lt;/excludes&gt;</span>
							<span class="nt">&lt;/artifactSet&gt;</span>
							<span class="nt">&lt;filters&gt;</span>
								<span class="nt">&lt;filter&gt;</span>
									<span class="nt">&lt;artifact&gt;</span>org.apache.flink:*<span class="nt">&lt;/artifact&gt;</span>
									<span class="nt">&lt;excludes&gt;</span>
										<span class="nt">&lt;exclude&gt;</span>org/apache/flink/shaded/**<span class="nt">&lt;/exclude&gt;</span>
										<span class="nt">&lt;exclude&gt;</span>web-docs/**<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;/excludes&gt;</span>
								<span class="nt">&lt;/filter&gt;</span>
								<span class="nt">&lt;filter&gt;</span>
									<span class="c">&lt;!-- Do not copy the signatures in the META-INF folder.
									Otherwise, this might cause SecurityExceptions when using the JAR. --&gt;</span>
									<span class="nt">&lt;artifact&gt;</span>*:*<span class="nt">&lt;/artifact&gt;</span>
									<span class="nt">&lt;excludes&gt;</span>
										<span class="nt">&lt;exclude&gt;</span>META-INF/*.SF<span class="nt">&lt;/exclude&gt;</span>
										<span class="nt">&lt;exclude&gt;</span>META-INF/*.DSA<span class="nt">&lt;/exclude&gt;</span>
										<span class="nt">&lt;exclude&gt;</span>META-INF/*.RSA<span class="nt">&lt;/exclude&gt;</span>
									<span class="nt">&lt;/excludes&gt;</span>
								<span class="nt">&lt;/filter&gt;</span>
							<span class="nt">&lt;/filters&gt;</span>
							<span class="nt">&lt;transformers&gt;</span>
								<span class="c">&lt;!-- add Main-Class to manifest file --&gt;</span>
								<span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer"</span><span class="nt">&gt;</span>
									<span class="nt">&lt;mainClass&gt;</span>com.example.app.FlinkTestConsumer<span class="nt">&lt;/mainClass&gt;</span>
								<span class="nt">&lt;/transformer&gt;</span>
							<span class="nt">&lt;/transformers&gt;</span>
							<span class="nt">&lt;createDependencyReducedPom&gt;</span>false<span class="nt">&lt;/createDependencyReducedPom&gt;</span>
						<span class="nt">&lt;/configuration&gt;</span>
					<span class="nt">&lt;/execution&gt;</span>
				<span class="nt">&lt;/executions&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>

			<span class="c">&lt;!-- Configure the jar plugin to add the main class as a manifest entry --&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>2.5<span class="nt">&lt;/version&gt;</span>
				<span class="nt">&lt;configuration&gt;</span>
					<span class="nt">&lt;archive&gt;</span>
						<span class="nt">&lt;manifestEntries&gt;</span>
							<span class="nt">&lt;Main-Class&gt;</span>com.example.app.FlinkTestConsumer<span class="nt">&lt;/Main-Class&gt;</span>
						<span class="nt">&lt;/manifestEntries&gt;</span>
					<span class="nt">&lt;/archive&gt;</span>
				<span class="nt">&lt;/configuration&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>

			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>3.8.1<span class="nt">&lt;/version&gt;</span>
				<span class="nt">&lt;configuration&gt;</span>
					<span class="nt">&lt;release&gt;</span>8<span class="nt">&lt;/release&gt;</span>
				<span class="nt">&lt;/configuration&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
		<span class="nt">&lt;/plugins&gt;</span>
	<span class="nt">&lt;/build&gt;</span>
	<span class="nt">&lt;profiles&gt;</span>
		<span class="nt">&lt;profile&gt;</span>
			<span class="c">&lt;!-- A profile that does everyting correctly:
			We set the Flink dependencies to provided --&gt;</span>
			<span class="nt">&lt;id&gt;</span>build-jar<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;activation&gt;</span>
				<span class="nt">&lt;activeByDefault&gt;</span>false<span class="nt">&lt;/activeByDefault&gt;</span>
			<span class="nt">&lt;/activation&gt;</span>
			<span class="nt">&lt;dependencies&gt;</span>
				<span class="nt">&lt;dependency&gt;</span>
					<span class="nt">&lt;groupId&gt;</span>org.apache.flink<span class="nt">&lt;/groupId&gt;</span>
					<span class="nt">&lt;artifactId&gt;</span>flink-java<span class="nt">&lt;/artifactId&gt;</span>
					<span class="nt">&lt;version&gt;</span>${flink.version}<span class="nt">&lt;/version&gt;</span>
					<span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
				<span class="nt">&lt;/dependency&gt;</span>
				<span class="nt">&lt;dependency&gt;</span>
					<span class="nt">&lt;groupId&gt;</span>org.apache.flink<span class="nt">&lt;/groupId&gt;</span>
					<span class="nt">&lt;artifactId&gt;</span>flink-streaming-java<span class="nt">&lt;/artifactId&gt;</span>
					<span class="nt">&lt;version&gt;</span>${flink.version}<span class="nt">&lt;/version&gt;</span>
					<span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
				<span class="nt">&lt;/dependency&gt;</span>
				<span class="nt">&lt;dependency&gt;</span>
					<span class="nt">&lt;groupId&gt;</span>org.apache.flink<span class="nt">&lt;/groupId&gt;</span>
					<span class="nt">&lt;artifactId&gt;</span>flink-clients<span class="nt">&lt;/artifactId&gt;</span>
					<span class="nt">&lt;version&gt;</span>${flink.version}<span class="nt">&lt;/version&gt;</span>
					<span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
				<span class="nt">&lt;/dependency&gt;</span>
			<span class="nt">&lt;/dependencies&gt;</span>
		<span class="nt">&lt;/profile&gt;</span>
	<span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<p>ë‹¤ìŒì€ OCI Streaming Service ì ‘ì†ì„ ìœ„í•œ ì„¤ì • íŒŒì¼ì„ ì‘ì„±í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ Stream Poolì—ì„œ í™•ì¸í•œ Kafka ì ‘ì† ì •ë³´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<p><strong>consumer.config</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bootstrap.servers=cell-1.streaming.ap-seoul-1.oci.oraclecloud.com:9092
group.id=FlinkExampleConsumer
request.timeout.ms=60000
sasl.mechanism=PLAIN
security.protocol=SASL_SSL
sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=\"{í…Œë„Œì‹œëª…}/{ì‚¬ìš©ì ê³„ì •}/{Stream Pool OCID}\" password=\"{AUTH_TOKEN}\";
</code></pre></div></div>

<p>Javaë¡œ ì‘ì„±ëœ ì½”ë“œì´ë©°, FlinkKafkaConsumerë¡œ Stream(Topic)ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ì—¬ ì¶œë ¥ë§Œ í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ê°„ë‹¨í•œ ì½”ë“œì…ë‹ˆë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"all"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FlinkTestConsumer</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">TOPIC</span> <span class="o">=</span> <span class="s">"flink-topic"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">FILE_PATH</span> <span class="o">=</span> <span class="s">"src/main/resources/consumer.config"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//Load properties from config file</span>
            <span class="nc">Properties</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Properties</span><span class="o">();</span>
            <span class="n">properties</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="no">FILE_PATH</span><span class="o">));</span>
            
            <span class="kd">final</span> <span class="nc">StreamExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="nc">StreamExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>
            <span class="nc">DataStream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">addSource</span><span class="o">(</span><span class="k">new</span> <span class="nc">FlinkKafkaConsumer011</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="no">TOPIC</span><span class="o">,</span> <span class="k">new</span> <span class="nc">SimpleStringSchema</span><span class="o">(),</span> <span class="n">properties</span><span class="o">));</span>
            <span class="n">stream</span><span class="o">.</span><span class="na">print</span><span class="o">();</span>
            <span class="n">env</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="s">"Testing flink consumer"</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">FileNotFoundException</span> <span class="n">e</span><span class="o">){</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"FileNoteFoundException: "</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Failed with exception "</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="ë¹Œë“œ-ë°-ì¡job-ì‹¤í–‰">ë¹Œë“œ ë° ì¡(Job) ì‹¤í–‰</h4>
<p><strong>ë¹Œë“œ</strong></p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>mvn package
</code></pre></div></div>

<p><strong>ì¡ ì‹¤í–‰</strong></p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>flink run <span class="nt">-c</span> <span class="s2">"com.example.app.FlinkTestConsumer"</span> target/oss-kafka-flink-consumer-1.0-SNAPSHOT.jar 
<span class="go">
Job has been submitted with JobID fe7e3abba870a537cf4f5a7961ae924e
</span></code></pre></div></div>

<p><strong>ì¡(Job) ì‹¤í–‰ í™•ì¸</strong>
<img src="https://mangdan.github.io/assets/images/oci-oss-flink-running-jobs.png" alt="" /></p>

<h3 id="kafka-ìƒì‚°ì-producer">Kafka ìƒì‚°ì (Producer)</h3>
<p>Kafka ìƒì‚°ìëŠ” Javaë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

<h4 id="kafka-ìƒì‚°ì-ì½”ë“œ-ì‘ì„±">Kafka ìƒì‚°ì ì½”ë“œ ì‘ì„±</h4>
<p>Kafka Dependency ì„¤ì •ê³¼ í•¨ê»˜ Jar ì‹¤í–‰ ì‹œ Kafka ê´€ë ¨ Libraryì¶”ê°€ë¥¼ ìœ„í•œ Maven Plugin êµ¬ì„±ì„ í•©ë‹ˆë‹¤.</p>

<p><strong>pom.xml</strong></p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>com.example.app<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>oss-kafka-producer<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
	<span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;properties&gt;</span>
		<span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
		<span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
		<span class="nt">&lt;kafka.version&gt;</span>3.3.1<span class="nt">&lt;/kafka.version&gt;</span>
	<span class="nt">&lt;/properties&gt;</span>

	<span class="nt">&lt;dependencies&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.apache.kafka<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>kafka-clients<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>${kafka.version}<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>slf4j-api<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>2.0.5<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>1.4.5<span class="nt">&lt;/version&gt;</span>
		  <span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>2.0.5<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jackson-databind<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>2.14.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span> 
	<span class="nt">&lt;/dependencies&gt;</span>
	<span class="nt">&lt;build&gt;</span>
		<span class="nt">&lt;defaultGoal&gt;</span>install<span class="nt">&lt;/defaultGoal&gt;</span>
		<span class="nt">&lt;plugins&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>3.8.1<span class="nt">&lt;/version&gt;</span>
				<span class="nt">&lt;configuration&gt;</span>
					<span class="nt">&lt;release&gt;</span>8<span class="nt">&lt;/release&gt;</span>
				<span class="nt">&lt;/configuration&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>maven-resources-plugin<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>3.2.0<span class="nt">&lt;/version&gt;</span>
				<span class="nt">&lt;configuration&gt;</span>
					<span class="nt">&lt;encoding&gt;</span>UTF-8<span class="nt">&lt;/encoding&gt;</span>
				<span class="nt">&lt;/configuration&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>3.1.2<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;executions&gt;</span>
                    <span class="nt">&lt;execution&gt;</span>
                        <span class="nt">&lt;id&gt;</span>copy-dependencies<span class="nt">&lt;/id&gt;</span>
                        <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
                        <span class="nt">&lt;goals&gt;</span>
                            <span class="nt">&lt;goal&gt;</span>copy-dependencies<span class="nt">&lt;/goal&gt;</span>
                        <span class="nt">&lt;/goals&gt;</span>
                        <span class="nt">&lt;configuration&gt;</span>
                            <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}/libs<span class="nt">&lt;/outputDirectory&gt;</span>
                            <span class="nt">&lt;overWriteReleases&gt;</span>false<span class="nt">&lt;/overWriteReleases&gt;</span>
                            <span class="nt">&lt;overWriteSnapshots&gt;</span>false<span class="nt">&lt;/overWriteSnapshots&gt;</span>
                            <span class="nt">&lt;overWriteIfNewer&gt;</span>true<span class="nt">&lt;/overWriteIfNewer&gt;</span>
                            <span class="nt">&lt;includeScope&gt;</span>runtime<span class="nt">&lt;/includeScope&gt;</span>
                        <span class="nt">&lt;/configuration&gt;</span>
                    <span class="nt">&lt;/execution&gt;</span>
                <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>2.5<span class="nt">&lt;/version&gt;</span>
				<span class="nt">&lt;configuration&gt;</span>
					<span class="nt">&lt;archive&gt;</span>
						<span class="nt">&lt;manifest&gt;</span>
							<span class="nt">&lt;addClasspath&gt;</span>true<span class="nt">&lt;/addClasspath&gt;</span>
							<span class="nt">&lt;addExtensions&gt;</span>true<span class="nt">&lt;/addExtensions&gt;</span> 
							<span class="nt">&lt;mainClass&gt;</span>com.example.app.KafkaProducerExample<span class="nt">&lt;/mainClass&gt;</span>
							<span class="nt">&lt;classpathPrefix&gt;</span>libs/<span class="nt">&lt;/classpathPrefix&gt;</span>                            
						<span class="nt">&lt;/manifest&gt;</span>
						<span class="c">&lt;!-- &lt;manifestEntries&gt;
							&lt;Class-Path&gt;libs/kafka-clients-2.6.0.jar&lt;/Class-Path&gt;
						&lt;/manifestEntries&gt; --&gt;</span>
					<span class="nt">&lt;/archive&gt;</span>
				<span class="nt">&lt;/configuration&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
		<span class="nt">&lt;/plugins&gt;</span>
	<span class="nt">&lt;/build&gt;</span>
	<span class="nt">&lt;profiles&gt;</span>
		<span class="nt">&lt;profile&gt;</span>
			<span class="c">&lt;!-- A profile that does everyting correctly:
			We set the Flink dependencies to provided --&gt;</span>
			<span class="nt">&lt;id&gt;</span>build-jar<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;activation&gt;</span>
				<span class="nt">&lt;activeByDefault&gt;</span>false<span class="nt">&lt;/activeByDefault&gt;</span>
			<span class="nt">&lt;/activation&gt;</span>
			<span class="nt">&lt;dependencies&gt;</span>
				<span class="nt">&lt;dependency&gt;</span>
					<span class="nt">&lt;groupId&gt;</span>org.apache.kafka<span class="nt">&lt;/groupId&gt;</span>
					<span class="nt">&lt;artifactId&gt;</span>kafka-clients<span class="nt">&lt;/artifactId&gt;</span>
					<span class="nt">&lt;version&gt;</span>${kafka.version}<span class="nt">&lt;/version&gt;</span>
					<span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
				<span class="nt">&lt;/dependency&gt;</span>
			<span class="nt">&lt;/dependencies&gt;</span>
		<span class="nt">&lt;/profile&gt;</span>
	<span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<p>ì‹¤í–‰ ì‹œ 5ê±´ì˜ í…ìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ OCI Streaming Serviceë¡œ ì „ì†¡í•˜ë„ë¡ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"all"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CompatibleProducer</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">produce</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">authToken</span> <span class="o">=</span> <span class="s">"{AUTH_TOKEN}"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">tenancyName</span> <span class="o">=</span> <span class="s">"{í…Œë„Œì‹œëª…}"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"{ì‚¬ìš©ì ê³„ì •}"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">streamPoolId</span> <span class="o">=</span> <span class="s">"{Stream Pool OCID}"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">topicName</span> <span class="o">=</span> <span class="s">"{Stream Name/Topic Name}"</span><span class="o">;</span>

        <span class="nc">Properties</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Properties</span><span class="o">();</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">ProducerConfig</span><span class="o">.</span><span class="na">BOOTSTRAP_SERVERS_CONFIG</span><span class="o">,</span> <span class="s">"cell-1.streaming.ap-seoul-1.oci.oraclecloud.com:9092"</span><span class="o">);</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">ProducerConfig</span><span class="o">.</span><span class="na">KEY_SERIALIZER_CLASS_CONFIG</span><span class="o">,</span> <span class="nc">StringSerializer</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">ProducerConfig</span><span class="o">.</span><span class="na">VALUE_SERIALIZER_CLASS_CONFIG</span><span class="o">,</span> <span class="nc">StringSerializer</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">ProducerConfig</span><span class="o">.</span><span class="na">TRANSACTION_TIMEOUT_CONFIG</span><span class="o">,</span> <span class="mi">5000</span><span class="o">);</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">ProducerConfig</span><span class="o">.</span><span class="na">DELIVERY_TIMEOUT_MS_CONFIG</span><span class="o">,</span> <span class="mi">5000</span><span class="o">);</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">ProducerConfig</span><span class="o">.</span><span class="na">REQUEST_TIMEOUT_MS_CONFIG</span><span class="o">,</span> <span class="mi">5000</span><span class="o">);</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"sasl.mechanism"</span><span class="o">,</span> <span class="s">"PLAIN"</span><span class="o">);</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"security.protocol"</span><span class="o">,</span> <span class="s">"SASL_SSL"</span><span class="o">);</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"sasl.jaas.config"</span><span class="o">,</span>
                        <span class="s">"org.apache.kafka.common.security.plain.PlainLoginModule required username=\""</span>
                        <span class="o">+</span> <span class="n">tenancyName</span> <span class="o">+</span> <span class="s">"/"</span>
                        <span class="o">+</span> <span class="n">username</span> <span class="o">+</span> <span class="s">"/"</span>
                        <span class="o">+</span> <span class="n">streamPoolId</span> <span class="o">+</span> <span class="s">"\" "</span>
                        <span class="o">+</span> <span class="s">"password=\""</span>
                        <span class="o">+</span> <span class="n">authToken</span> <span class="o">+</span> <span class="s">"\";"</span>
        <span class="o">);</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"retries"</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span> <span class="c1">// retries on transient errors and load balancing disconnection</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"max.request.size"</span><span class="o">,</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="o">);</span> <span class="c1">// limit request size to 1MB</span>

        <span class="nc">KafkaProducer</span> <span class="n">producer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KafkaProducer</span><span class="o">(</span><span class="n">properties</span><span class="o">);</span>
        
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">ProducerRecord</span> <span class="n">record</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ProducerRecord</span><span class="o">(</span><span class="n">topicName</span><span class="o">,</span> <span class="no">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">(),</span> <span class="s">"Test record #"</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
            
            <span class="n">producer</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">record</span><span class="o">,</span> <span class="o">(</span><span class="n">md</span><span class="o">,</span> <span class="n">ex</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span> <span class="n">ex</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
                    <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="k">else</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span>
                            <span class="s">"Sent msg to "</span>
                                    <span class="o">+</span> <span class="n">md</span><span class="o">.</span><span class="na">partition</span><span class="o">()</span>
                                    <span class="o">+</span> <span class="s">" with offset "</span>
                                    <span class="o">+</span> <span class="n">md</span><span class="o">.</span><span class="na">offset</span><span class="o">()</span>
                                    <span class="o">+</span> <span class="s">" at "</span>
                                    <span class="o">+</span> <span class="n">md</span><span class="o">.</span><span class="na">timestamp</span><span class="o">()</span>
                    <span class="o">);</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span>
        <span class="n">producer</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
        <span class="n">producer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"produced 5 messages"</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>
<h4 id="ë¹Œë“œ-ë°-ìƒì‚°ì-ì‹¤í–‰">ë¹Œë“œ ë° ìƒì‚°ì ì‹¤í–‰</h4>
<p><strong>ë¹Œë“œ</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mvn package
</code></pre></div></div>

<p><strong>ì‹¤í–‰</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ java -jar target/oss-kafka-producer-1.0-SNAPSHOT.jar

00:11 INFO  o.a.k.c.s.a.AbstractLogin - Successfully logged in.
00:11 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 2.6.0
00:11 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: 62abe01bee039651
00:11 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1601824282658
00:11 INFO  org.apache.kafka.clients.Metadata - [Producer clientId=producer-1] Cluster ID: OSS
Sent msg to 0 with offset 15 at 1601824286584
Sent msg to 0 with offset 16 at 1601824286584
Sent msg to 0 with offset 17 at 1601824286584
Sent msg to 0 with offset 18 at 1601824286584
Sent msg to 0 with offset 19 at 1601824286584
00:11 INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=producer-1] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.
produced 5 messages
</code></pre></div></div>

<p><strong>ê²Œì‹œëœ ë©”ì‹œì§€ë¥¼ OCI Streaming Serviceì—ì„œ í™•ì¸</strong>
<img src="https://mangdan.github.io/assets/images/oci-oss-recent-messages.png" alt="" /></p>

<h3 id="flink-job-task-í™•ì¸">Flink Job Task í™•ì¸</h3>
<p>Flink Consoleì—ì„œ Task Managers &gt; Stdoutìœ¼ë¡œ ì´ë™í•˜ì—¬ ì†Œë¹„í•œ ë©”ì‹œì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<img src="https://mangdan.github.io/assets/images/oci-oss-flink-stdout.png" alt="" /></p>

<h3 id="ì†ŒìŠ¤-ê³µìœ ">ì†ŒìŠ¤ ê³µìœ </h3>
<p>ì†ŒìŠ¤ëŠ” ë‹¤ìŒ <a href="https://github.com/MangDan/oci-streaming-examples">ê¹ƒí—™ ì €ì¥ì†Œ</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="ì°¸ê³ ">ì°¸ê³ </h3>
<ul>
  <li><a href="https://blogs.oracle.com/developers/oracle-streaming-service-producer-consumer">https://blogs.oracle.com/developers/oracle-streaming-service-producer-consumer</a></li>
  <li><a href="https://github.com/igfasouza/OSS_examples">https://github.com/igfasouza/OSS_examples</a></li>
</ul>

:ET