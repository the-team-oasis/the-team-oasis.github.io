I"<div class="panel radius">
  <p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#서비스-소개" id="markdown-toc-서비스-소개">서비스 소개</a></li>
  <li><a href="#odsa를-통해-설정된-multi-cloud-연결을-해제하기-위한-사전-준비사항" id="markdown-toc-odsa를-통해-설정된-multi-cloud-연결을-해제하기-위한-사전-준비사항">ODSA를 통해 설정된 Multi Cloud 연결을 해제하기 위한 사전 준비사항</a>    <ul>
      <li><a href="#microsoft-azure-준비사항" id="markdown-toc-microsoft-azure-준비사항">Microsoft Azure 준비사항</a></li>
      <li><a href="#oracle-cloud-infrastructure-준비사항" id="markdown-toc-oracle-cloud-infrastructure-준비사항">Oracle Cloud Infrastructure 준비사항</a></li>
    </ul>
  </li>
  <li><a href="#oci-사용자-상세화면에서-api-키-등록하기" id="markdown-toc-oci-사용자-상세화면에서-api-키-등록하기">OCI 사용자 상세화면에서 API 키 등록하기</a></li>
  <li><a href="#oci-curl-스크립트-다운로드-및-설정하기" id="markdown-toc-oci-curl-스크립트-다운로드-및-설정하기">OCI CURL 스크립트 다운로드 및 설정하기</a></li>
  <li><a href="#odsa-서비스-연결-해제하기" id="markdown-toc-odsa-서비스-연결-해제하기">ODSA 서비스 연결 해제하기</a>    <ul>
      <li><a href="#azure-리소스-삭제하기" id="markdown-toc-azure-리소스-삭제하기">Azure 리소스 삭제하기</a></li>
      <li><a href="#oci-리소스-삭제하기" id="markdown-toc-oci-리소스-삭제하기">OCI 리소스 삭제하기</a></li>
    </ul>
  </li>
</ul>

</div>

<h3 id="서비스-소개">서비스 소개</h3>
<p>서비스 소개 및 ODSA 연결에 대한 정보는 아래 포스팅에서 참고해주세요</p>
<blockquote>
  <p><a href="/dataflatform/oracle-database-service-for-azure/">Oracle Database Service for Azure 소개</a></p>
</blockquote>

<h3 id="odsa를-통해-설정된-multi-cloud-연결을-해제하기-위한-사전-준비사항">ODSA를 통해 설정된 Multi Cloud 연결을 해제하기 위한 사전 준비사항</h3>
<blockquote>
  <p>본 예제는 MacOS 기준으로 작성되었습니다.</p>
</blockquote>

<h4 id="microsoft-azure-준비사항">Microsoft Azure 준비사항</h4>
<ul>
  <li>ODSA 서비스가 연결된 계정 정보</li>
</ul>

<h4 id="oracle-cloud-infrastructure-준비사항">Oracle Cloud Infrastructure 준비사항</h4>
<ul>
  <li>OCI CLI 실행을 위한 API 키 등록</li>
  <li>OCI CURL 설정 진행</li>
</ul>

<h3 id="oci-사용자-상세화면에서-api-키-등록하기">OCI 사용자 상세화면에서 API 키 등록하기</h3>
<ol>
  <li>OCI 콘솔에 접속 후 우측 상단 <strong>“프로파일”</strong> 아이콘을 클릭 후 <strong>“내 프로파일”</strong> 메뉴를 클릭합니다.
<img src="/assets/img/dataplatform/2022/odsa-regist-api-key-1.png" alt="Regist API Key #1" /></li>
  <li>이동한 화면에서 좌측 하단 <strong>“API 키”</strong> 메뉴를 클릭 후 <strong>“API 키 추가”</strong> 버튼을 클릭하여 API키를 다운로드 받거나, 기존 키를 업로드 후 <strong>“추가”</strong> 버튼을 클릭하여 API키를 등록합니다.
<img src="/assets/img/dataplatform/2022/odsa-regist-api-key-2.png" alt="Regist API Key #2" /></li>
  <li>등록 후 등록된 정보를 복사해 둡니다. <code class="language-plaintext highlighter-rouge">(복사한 정보는 OCI CURL 설정시 사용합니다.)</code>
<img src="/assets/img/dataplatform/2022/odsa-regist-api-key-3.png" alt="Regist API Key #3" /></li>
</ol>

<h3 id="oci-curl-스크립트-다운로드-및-설정하기">OCI CURL 스크립트 다운로드 및 설정하기</h3>
<ol>
  <li><a href="/assets/files/dataplatform/2022/oci-curl.sh.zip">oci-curl.sh.zip</a> 링크를 클릭하여 oci-curl.sh 압축 파일을 다운로드 하여 압축을 해제합니다.</li>
  <li><mark>oci-curl.sh</mark> 파일 상단에 아래 변수에 API 키 등록 후 확인했던 값들을 변수에 설정하여 줍니다.
<img src="/assets/img/dataplatform/2022/odsa-oci-curl-setup-1.png" alt="Setup oci-curl #1" /></li>
  <li>아래 명령어를 입력 후 실행하여 줍니다. <em>(참고로 아래 명령어는 아무결과도 반환되지 않습니다. “invalid method”가 나오는 경우 oci-curl.sh 파일을 다시 확인해야 합니다.’오타, 등등’)</em>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ cd &lt;oci-curl.sh 파일이 위치한 경로&gt;
 $ source oci-curl.sh
 $ bash oci-curl.sh
</code></pre></div>    </div>
  </li>
  <li>OCI 콘솔의 “ID &amp; 보안” &gt; “ID” &gt; “구획” 메뉴로 이동하여 Root 구획의 OCID를 복사합니다.
<img src="/assets/img/dataplatform/2022/odsa-oci-curl-setup-2.png" alt="Setup oci-curl #2" /></li>
  <li>oci-curl 파일이 위치한 경로에서 아래 구조로 명령어를 조합하여 실행 후 결과를 확인합니다.<br />
<strong>jq가 설치되어 있지 않은 경우 마지막 ‘| jq’ 는 생략 가능합니다.</strong><br />
<mark>$ oci-curl mchub-cloud-link.ap-seoul-1.oci.oraclecloud.com get "/20220401/cloudLinks?compartmentId=<루트 구획="" OCID="">&amp;lifecycleState=ACTIVE" | jq&lt;/mark&gt;
![Setup oci-curl #3](/assets/img/dataplatform/2022/odsa-oci-curl-setup-3.png)</루트></mark></li>
  <li>위 OCI CURL을 통해 확인된 정보는 추후 cloudLink 를 삭제하는데 사용됩니다.</li>
</ol>

<h3 id="odsa-서비스-연결-해제하기">ODSA 서비스 연결 해제하기</h3>
<h4 id="azure-리소스-삭제하기">Azure 리소스 삭제하기</h4>
<ol>
  <li>Azure Portal로 이동하여 Enterprise applications 서비스로 이동합니다.
<img src="/assets/img/dataplatform/2022/oracle-odsa-unlink-multicloud-1.png" alt="ODSA Unlink Multicloud #1" /></li>
  <li>Application 목록에서 <code class="language-plaintext highlighter-rouge">Oracle Database Service</code>를 클릭합니다.
<img src="/assets/img/dataplatform/2022/oracle-odsa-unlink-multicloud-2.png" alt="ODSA Unlink Multicloud #2" /></li>
  <li>하단의 What’s New 섹션에서 <strong>“Delete Application has moved to Properties”</strong> 의 <strong>“View Properties”</strong> 링크를 클릭합니다.
<img src="/assets/img/dataplatform/2022/oracle-odsa-unlink-multicloud-3.png" alt="ODSA Unlink Multicloud #3" /></li>
  <li>이동 화면 상단의 <strong>“Delete”</strong> 버튼을 클릭하여 리소스를 삭제합니다.
<img src="/assets/img/dataplatform/2022/oracle-odsa-unlink-multicloud-4.png" alt="ODSA Unlink Multicloud #4" /></li>
  <li>Azure에서 ODSA 서비스 연결은 삭제 완료되었습니다.</li>
</ol>

<h4 id="oci-리소스-삭제하기">OCI 리소스 삭제하기</h4>
<p>위 OCI CURL 설정이 정상적으로 완료되었다면, cloudlink에 대한 ID를 확인할 수 있습니다. 그 정보를 이용하여 아래와 같이 명령어를 조합 하여 cloudlink 리소스를 삭제할 수 있습니다.<br />
<mark>$ oci-curl mchub-cloud-link.ap-seoul-1.oci.oraclecloud.com delete "/20220401/cloudLinks/<CloudLink ID를="" 입력합니다.="">" | jq&lt;/mark&gt;</CloudLink></mark></p>
<ul>
  <li>삭제 명령 실행 후 조회를 다시한번 수행해보면 정상적으로 삭제된 것을 확인할 수 있습니다.
<img src="/assets/img/dataplatform/2022/oracle-odsa-unlink-multicloud-5.png" alt="ODSA Unlink Multicloud #5" /></li>
</ul>

:ET