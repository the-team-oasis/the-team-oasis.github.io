I"<div class="panel radius">
  <p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#튜토리얼에서-다룰-내용" id="markdown-toc-튜토리얼에서-다룰-내용">튜토리얼에서 다룰 내용</a></li>
  <li><a href="#인스턴스에-ssh-접속을-위한-ssh-키-쌍-생성" id="markdown-toc-인스턴스에-ssh-접속을-위한-ssh-키-쌍-생성">인스턴스에 SSH 접속을 위한 SSH 키 쌍 생성</a>    <ul>
      <li><a href="#putty-key-generator를-활용하여-ssh-키-생성" id="markdown-toc-putty-key-generator를-활용하여-ssh-키-생성">Putty Key Generator를 활용하여 SSH 키 생성</a></li>
    </ul>
  </li>
  <li><a href="#구획-compartment-생성" id="markdown-toc-구획-compartment-생성">구획 (Compartment) 생성</a></li>
  <li><a href="#가상-클라우드-네트워크-virtual-cloud-network-vcn-생성" id="markdown-toc-가상-클라우드-네트워크-virtual-cloud-network-vcn-생성">가상 클라우드 네트워크 (Virtual Cloud Network: VCN) 생성</a></li>
  <li><a href="#리눅스-인스턴스-생성-및-시작하기" id="markdown-toc-리눅스-인스턴스-생성-및-시작하기">리눅스 인스턴스 생성 및 시작하기</a></li>
  <li><a href="#리눅스-인스턴스-접속을-위한-준비" id="markdown-toc-리눅스-인스턴스-접속을-위한-준비">리눅스 인스턴스 접속을 위한 준비</a>    <ul>
      <li><a href="#unix-스타일-시스템에서-linux-인스턴스에-연결하려면" id="markdown-toc-unix-스타일-시스템에서-linux-인스턴스에-연결하려면">Unix 스타일 시스템에서 Linux 인스턴스에 연결하려면</a></li>
      <li><a href="#openssh를-사용하여-windows-시스템에서-linux-인스턴스에-연결하려면" id="markdown-toc-openssh를-사용하여-windows-시스템에서-linux-인스턴스에-연결하려면">OpenSSH를 사용하여 Windows 시스템에서 Linux 인스턴스에 연결하려면</a></li>
      <li><a href="#putty를-사용하여-windows-환경에서-linux-인스턴스에-연결하려면" id="markdown-toc-putty를-사용하여-windows-환경에서-linux-인스턴스에-연결하려면">PuTTY를 사용하여 Windows 환경에서 Linux 인스턴스에 연결하려면</a></li>
    </ul>
  </li>
  <li><a href="#블록-볼륨-추가" id="markdown-toc-블록-볼륨-추가">블록 볼륨 추가</a>    <ul>
      <li><a href="#블록-볼륨-생성" id="markdown-toc-블록-볼륨-생성">블록 볼륨 생성</a></li>
      <li><a href="#인스턴스에-볼륨-연결-attach--connect" id="markdown-toc-인스턴스에-볼륨-연결-attach--connect">인스턴스에 볼륨 연결 (Attach &amp; Connect)</a></li>
      <li><a href="#블록-볼륨-포멧" id="markdown-toc-블록-볼륨-포멧">블록 볼륨 포멧</a></li>
      <li><a href="#블록-볼륨-마운트" id="markdown-toc-블록-볼륨-마운트">블록 볼륨 마운트</a></li>
    </ul>
  </li>
  <li><a href="#모든-리소스-정리" id="markdown-toc-모든-리소스-정리">모든 리소스 정리</a>    <ul>
      <li><a href="#블록-볼륨-분리-및-삭제" id="markdown-toc-블록-볼륨-분리-및-삭제">블록 볼륨 분리 및 삭제</a></li>
      <li><a href="#인스턴스-종료" id="markdown-toc-인스턴스-종료">인스턴스 종료</a></li>
      <li><a href="#가상-클라우드-네트워크-virtual-cloud-network-삭제" id="markdown-toc-가상-클라우드-네트워크-virtual-cloud-network-삭제">가상 클라우드 네트워크 (Virtual Cloud Network) 삭제</a></li>
    </ul>
  </li>
</ul>

</div>

<h3 id="튜토리얼에서-다룰-내용">튜토리얼에서 다룰 내용</h3>
<p>튜토리얼에서 다룰 내용은 다음과 같습니다.</p>

<ul>
  <li>클라우드 네트워크 및 인터넷 접속이 가능한 서브넷 생성</li>
  <li>인스턴스 생성 및 시작</li>
  <li>인스턴스에 SSH 접속</li>
  <li>블록 볼륨 스토리지 추가</li>
</ul>

<p>아래 그림은 튜토리얼을 통해서 생성된 리소스들을 보여줍니다.
<img src="/assets/img/getting-started/2022/gsg-instance-linux.png" alt="" title=" " /></p>

<h3 id="인스턴스에-ssh-접속을-위한-ssh-키-쌍-생성">인스턴스에 SSH 접속을 위한 SSH 키 쌍 생성</h3>
<p>OpenSSH로 인스턴스에 접속 혹은 유닉스 기반 클라이언트(MacOS 등)에서 접속하는 경우에는 인스턴스 생성 시에 자동으로 생성된 SSH 키 쌍을 다운로드 받을 수 있기 때문에 이 단계를 건너뜁니다. 또한 이미 <a href="https://docs.oracle.com/en-us/iaas/Content/General/Concepts/credentials.htm#Instance">SSH-2 RSA 키 쌍</a>을 가지고 있는 경우에도 인스턴스 생성할 때 공개 키를 업로드 하거나 붙여넣기하여 추가할 수 있으므로, 마찬가지로 이 단계를 건너뜁니다.<br />
만일 클라이언트가 OpenSSH가 없는 윈도우 환경이라면, <strong>Putty</strong>를 활용하여 접속하는 경우가 많은데 이 경우에는 <strong>Putty Key Generator</strong>를 다운로드 받아서 Putty에서 사용하는 SSH키로 생성하여야 합니다. <strong>Putty Key Generator</strong>를 활용하면 기존에 사용중이던 <a href="https://docs.oracle.com/en-us/iaas/Content/General/Concepts/credentials.htm#Instance">SSH-2 RSA 키 쌍</a>를 Putty 전용 SSH 키로 변환도 가능합니다.</p>

<h4 id="putty-key-generator를-활용하여-ssh-키-생성">Putty Key Generator를 활용하여 SSH 키 생성</h4>
<p>먼저 <a href="https://www.puttygen.com/">https://www.puttygen.com/</a>에서 <strong>PuTTYgen</strong>을 다운로드 받고 설치합니다. <strong>puttygen.exe</strong>을 클릭하여 프로그램을 오픈합니다.</p>

<p>다음과 같이 <strong>SSH-2 RSA</strong>를 선택하고 <strong>키 사이즈</strong>를 <strong>2048</strong>로 입력한 후 <strong>Generate</strong> 버튼을 클릭합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-create-sshkey-1.png" alt="" title=" " /></p>

<p>생성되는 과정에서 빈 공간을 마우스를 움직이면 키가 랜덤하게 생성됩니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-create-sshkey-2.png" alt="" title=" " /></p>

<p><strong>Save private key</strong>를 클릭하여 전용 키를 다운로드 받습니다. 공개키의 경우 <strong>Public key for pasting into OpenSSH authorized_keys file</strong>의 내용을 다운로드 받은 Private Key 이름에 <strong>.pub</strong>라는 파일 확장자를 추가해서 복사 &amp; 붙여넣기 하여 생성합니다.<br />
예시) Private Key: mykey, Public Key: mykey.pub</p>

<blockquote>
  <p>키 코멘트, passphrase (키를 암호화)는 이 단계에서 건너뜁니다.</p>
</blockquote>

<p><img src="/assets/img/getting-started/2022/oci-create-sshkey-3.png" alt="" title=" " /></p>

<h3 id="구획-compartment-생성">구획 (Compartment) 생성</h3>
<p>모든 리소스들을 특정 구획에 생성할 것입니다. 우선 <strong>Sandbox</strong>라는 이름의 구획을 생성해 보도록 하겠습니다. 메뉴에서 <strong>ID &amp; 보안 (Identity &amp; Security) &gt; 구획(Compartment)</strong>를 선택합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-iam-7.png" alt="" title=" " /></p>

<p><strong>구획 생성</strong> 버튼을 클릭하고, 입력창에 다음과 같이 입력합니다.</p>
<ul>
  <li>구획명: Sandbox</li>
  <li>설명: Sandbox 사용자를 위한 구획</li>
</ul>

<p><img src="/assets/img/getting-started/2022/oci-iam-8.png" alt="" title=" " /></p>

<h3 id="가상-클라우드-네트워크-virtual-cloud-network-vcn-생성">가상 클라우드 네트워크 (Virtual Cloud Network: VCN) 생성</h3>
<p>인스턴스에서 사용할 VCN을 생성합니다. VCN 생성은 아래 링크를 참고하여 생성합니다.</p>

<blockquote>
  <p><a href="https://the-team-oasis.github.io/getting-started/create-vcn/">OCI에서 VCN Wizard를 활용하여 빠르게 VCN 생성하기</a></p>
</blockquote>

<p>VCN을 생성할 때 앞서 생성한 구획인 SandBox를 선택하여야 합니다.
<img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-1.png" alt="" title=" " /></p>

<h3 id="리눅스-인스턴스-생성-및-시작하기">리눅스 인스턴스 생성 및 시작하기</h3>
<p>이제 리눅스 인스턴스를 하나 생성해보겠습니다. 메뉴에서 <strong>컴퓨트(Compute) &gt; 인스턴스(Instances)</strong>를 차례로 클릭합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-2.png" alt="" title=" " /></p>

<p>구획으로 <strong>Sandbox</strong>를 선택한 후 <strong>인스턴스 생성(Create Instance)</strong>를 클릭합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-3.png" alt="" title=" " /></p>

<p>인스턴스 생성 화면에서 다음과 같이 입력합니다.</p>

<ul>
  <li>이름 (Name): my_first_linux_instance</li>
  <li>구획 (Create in compartment): Sandbox</li>
  <li>배치 (Placement)의 가용 도메인 (Availability domain): AD 1
    <ul>
      <li>가용 도메인은 데이터 센터를 의미합니다. 서울은 1개의 가용 도메인으로 운영됩니다.</li>
    </ul>
  </li>
  <li>이미지(Image): Oralce Linux 8
    <ul>
      <li>이미지는 기본 플랫폼 이미지(Ubuntu, CentOS, Oracle Linux, Windows 등), 오라클 이미지, 파트너 이미지, 커뮤니티 이미지, 커스텀 이미지등으로 분류되어 있으며, <a href="https://docs.oracle.com/en-us/iaas/images/">https://docs.oracle.com/en-us/iaas/images/</a>에서 기본 플랫폼 이미지 목록을 확인할 수 있습니다.</li>
    </ul>
  </li>
  <li>쉐입 (Shape): VM.Standard.E4.Flex (가상 머신, 1 core OCPU, 16 GB memory, 1 Gbps network bandwidth)
    <ul>
      <li>쉐입에서는 <strong>가상 머신(Virtual machine)</strong>과 <strong>베어메탈(Bare metal machine)</strong> 인스턴스 유형으로 나눠져 있으며, <strong>가상 머신</strong> 유형에서는 <strong>AMD</strong>, <strong>Intel</strong>, <strong>Ampere (Arm 기반 프로세서)</strong>로 구분되어 있습니다. 모든 쉐입은 Flex 타입으로 제공되는데, CPU와 메모리를 사용자가 선택하여 구성할 수 있습니다. 여기서는 <strong>가상 머신</strong> 유형에서 AMD 쉐입인 <strong>VM.Standard.E4.Flex</strong>으로 선택하고 CPU는 1개, 메모리는 16 GB로 선택합니다.</li>
      <li>OCI 쉐입에 대한 상세한 정보는 <a href="https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm">https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm</a> 링크에서 확인할 수 있습니다.</li>
    </ul>
  </li>
</ul>

<p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-4.png" alt="" title=" " /></p>

<p><strong>네트워킹</strong>에서는 앞서 생성한 VCN과 공용 서브넷(Public Subnet)을 선택하고 <strong>(공용 IP 주소) Public IP address</strong>를 <strong>공용 IPv4 주소 지정 (Assign a public IPv4 address)</strong>으로 선택합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-5.png" alt="" title=" " /></p>

<p><strong>SSH 키 추가</strong>에서는 <strong>자동으로 키 쌍 생성(Generate a key pair for me)</strong>을 선택하고 <strong>전용 키 저장 (Save Private Key)</strong>를 클릭하여 생성된 키를 다운로드 받을 수 있습니다.</p>

<blockquote>
  <p>다운로드 받은 키는 OpenSSH가 구성된 클라이언트에서만 사용 가능합니다. UNIX 기반 환경 (Linux 또는 MacOS), Windows 10, Windows Server 2019의 경우는 OpenSSH를 설치하여 다운로드 받은 키로 인스턴스에 접속이 가능합니다.</p>
</blockquote>

<p>기존에 가지고 있는 키가 있는 경우 <strong>공용 키</strong>를 <strong>공용 키 파일(.pub) 업로드(Upload public key files (.pub))</strong> 혹은 <strong>공용 키 붙여넣기(Paste public keys)</strong> 기능을 활용하여 인스턴스에 업로드 할 수 있습니다. 앞서 생성한 Putty 키를 사용하는 경우에는 Putty 공용 키를 업로드 합니다.</p>

<p><strong>부트 볼륨 (Boot volume)</strong>의 경우는 기본 옵션 상태로 둡니다.</p>

<p>마지막으로 <strong>생성 (Create)</strong> 버튼을 클릭합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-6.png" alt="" title=" " /></p>

<h3 id="리눅스-인스턴스-접속을-위한-준비">리눅스 인스턴스 접속을 위한 준비</h3>
<p>이제 실행중인 인스턴스에 SSH로 접속할 수 있습니다. 대부분의 리눅스 혹은 유닉스 시스템은 기본 SSH 클라이언트를 통해서 접속이 가능하지만, Windows 10 혹은 Windows 2019의 경우는 <a href="https://docs.microsoft.com/windows-server/administration/openssh/openssh_install_firstuse">Open SSH Client</a>를 설치하여야 합니다. 그 외 윈도우 환경의 경우 무료 SSH 클라이언트 프로그램인 <a href="http://www.putty.org">Putty</a>를 사용하여 접속할 수 있습니다.</p>

<p>우선 인스턴스에 접속하기 위해서는 생성한 인스턴스의 공용 IP를 확인하여야 합니다. 생성한 인스턴스 목록에서 바로 공용 IP를 확인할 수 있습니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-7.png" alt="" title=" " /></p>

<h4 id="unix-스타일-시스템에서-linux-인스턴스에-연결하려면">Unix 스타일 시스템에서 Linux 인스턴스에 연결하려면</h4>
<p>다운로드 받은 <strong>전용 키</strong> 혹은 <strong>업로드 한 공용 키에 대응하는 전용 키</strong>에 대해서 소유자만 파일을 읽을 수 있는 권한으로 변경합니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ chmod 400 &lt;private_key_file&gt;
</code></pre></div></div>

<p>다음 SSH 명령어로 인스턴스에 접속합니다.</p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>ssh <span class="nt">-i</span> &lt;private_key_file&gt; &lt;username&gt;@&lt;public-ip-address&gt;
</code></pre></div></div>

<blockquote>
  <p>Oracle Linux 및 CentOS 이미지의 경우 기본 사용자 이름은 opc입니다. Ubuntu 이미지의 경우 기본 사용자 이름은 ubuntu입니다.</p>
</blockquote>

<h4 id="openssh를-사용하여-windows-시스템에서-linux-인스턴스에-연결하려면">OpenSSH를 사용하여 Windows 시스템에서 Linux 인스턴스에 연결하려면</h4>
<ol>
  <li>다운로드 받은 <strong>전용 키</strong>를 마우스 우 클릭 후 <strong>속성 (Properties)</strong>을 클릭합니다.</li>
  <li><strong>보안 (Security)</strong> 탭에서 <strong>고급 (Advanced)</strong>을 클릭합니다.</li>
  <li><strong>사용 권한 (Permissions)</strong> 탭 의 <strong>사용 권한 항목 (Permission entries)</strong> 에 대해 <strong>보안 주체</strong>에 <strong>자신의 사용자 계정</strong>이 보이는지 확인합니다.</li>
  <li>
    <p><strong>상속 사용 안함</strong>을 클릭하고, <strong>상속된 사용 권한을 이 개체에 대한 명시적 사용 권한으로 변환</strong>을 선택합니다.</p>

    <p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-8.png" alt="" title=" " /></p>
  </li>
  <li><strong>사용 권한 항목 (Permission entries)</strong>에서 자신의 사용자 계정을 제외한 항목은 모두 삭제합니다.</li>
  <li>자신의 사용자 계정에 대한 액세스 권한이 <strong>모든 권한 (Full control)</strong>인지 확인합니다.</li>
  <li>
    <p>이제 Windows PowerShell을 열고 다음 명령을 실행합니다.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ssh -i &lt;private_key_file&gt; &lt;username&gt;@&lt;public-ip-address&gt;
</code></pre></div>    </div>

    <blockquote>
      <p>Oracle Linux 및 CentOS 이미지의 경우 기본 사용자 이름은 opc입니다. Ubuntu 이미지의 경우 기본 사용자 이름은 ubuntu입니다.</p>
    </blockquote>
  </li>
</ol>

<h4 id="putty를-사용하여-windows-환경에서-linux-인스턴스에-연결하려면">PuTTY를 사용하여 Windows 환경에서 Linux 인스턴스에 연결하려면</h4>
<ol>
  <li>Putty를 오픈합니다.</li>
  <li>
    <p>Category에서 Session을 선택한 후 <strong>Host Name (or IP address)</strong>에 생성한 인스턴스의 공용  IP를 입력합니다. Port는 <strong>22</strong> 이고, Connection type은 <strong>SSH</strong>로 선택합니다.</p>

    <p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-9.png" alt="" title=" " /></p>
  </li>
  <li>
    <p>Category에서 Connection과 Data를 순서대로 클릭한 후 <strong>Auto-login username</strong>에 사용자를 입력합니다.</p>

    <p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-10.png" alt="" title=" " /></p>

    <blockquote>
      <p>Oracle Linux 및 CentOS 이미지의 경우 기본 사용자 이름은 opc입니다. Ubuntu 이미지의 경우 기본 사용자 이름은 ubuntu입니다.</p>
    </blockquote>
  </li>
  <li>
    <p>Category에서 Connection과 SSH, Auth를 순서대로 클릭한 후 <strong>Private key file for authentication</strong>에 앞서 PuttyGen으로 생성한 <strong>전용 키</strong>를 선택하고 <strong>Open</strong>을 클릭하여 세션을 시작합니다.</p>

    <p><img src="/assets/img/getting-started/2022/oci-lanunch-linux-instance-11.png" alt="" title=" " /></p>

    <blockquote>
      <p>인스턴스에 처음 연결하는 경우 서버의 호스트 키가 레지스트리에 캐시되지 않는다는 메시지가 표시될 수 있습니다. 연결을 계속 하려면 <strong>예</strong> 를 클릭 합니다.</p>
    </blockquote>
  </li>
</ol>

<h3 id="블록-볼륨-추가">블록 볼륨 추가</h3>
<p>블록 볼륨 은 Oracle Cloud Infrastructure 컴퓨트 인스턴스에 사용할 수 스토리지입니다. 볼륨을 생성, 연결(Attach) 및 인스턴스에 탑재(Mount)한 후에는 인스턴스에서 물리적인 하드 드라이브처럼 사용할 수 있습니다. 볼륨은 한 번에 하나의 인스턴스에 연결할 수 있지만, 기존 인스턴스에서 볼륨을 분리하고 데이터를 유지한 상태에서 다른 인스턴스에 연결을 할 수 있습니다.</p>

<p>이 작업에서는 볼륨을 생성하고 인스턴스에 연결한 다음 해당 볼륨을 인스턴스에 연결하는 방법을 보여줍니다.</p>

<h4 id="블록-볼륨-생성">블록 볼륨 생성</h4>
<p>메뉴에서 <strong>스토리지(Stroage) &gt; 블록 볼륨(Block Volumes)</strong>을 차례로 클릭합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-1.png" alt="" title=" " /></p>

<p>다음과 같이 입력 및 선택합니다.</p>
<ul>
  <li>이름 (Name): my-block-volume-1</li>
  <li>구획에 생성 (Create In Compartment): Sandbox</li>
  <li>가용성 도메인 (Availability Domain): 데이터센터를 선택합니다. (서울은 1개)</li>
  <li>볼륨 크기 및 성능 (Volume Size and Performance)
    <ul>
      <li>사용자정의 선택 (Custom)</li>
      <li>볼륨 크기(GB) (Volume Size (in GB)) : 50</li>
      <li>대상 볼륨 성능 (Target Volume Performance): VPU (Volume Performance Units)값으로 10
        <ul>
          <li>VPU에 대한 자세한 정보는 <a href="https://docs.oracle.com/en-us/iaas/Content/Block/Concepts/blockvolumeperformance.htm">https://docs.oracle.com/en-us/iaas/Content/Block/Concepts/blockvolumeperformance.htm</a> 에서 확인</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>성능 자동 조정 (Auto-tune Performance): 설정 (On)
    <ul>
      <li>성능 자동 조정은 해당 볼륨이 분리된 상태에서는 가장 낮은 성능 옵션으로 자동 변경되어 비용이 절감됩니다. 다시 연결되면 이전에 설정된 성능 옵션으로 자동 조정됩니다.</li>
    </ul>
  </li>
  <li>백업 정책 (Backup Policies): 선택하지 않음
    <ul>
      <li>백업 정책을 설정하면 특정 시점에 자동으로 Object Storage에 백업이 이뤄집니다. 백업 정책 기본 Gold (가장 빈번하게 백업 발생), Silver, Bronze 정책이 제공되며, 사용자가 임의로 정의할 수 있습니다.</li>
    </ul>
  </li>
  <li>영역 간 복제 (Cross Region Replication): 해제 (OFF)
    <ul>
      <li>영역 간 복제는 현재 블록 볼륨을 생성하는 리전과 매핑되는 리전으로 자동 비동기 복제를 하는 기능입니다.</li>
      <li>영역 간 복제에 대한 설명과 매핑된 리전은 <a href="https://docs.oracle.com/en-us/iaas/Content/Block/Concepts/volumereplication.htm">https://docs.oracle.com/en-us/iaas/Content/Block/Concepts/volumereplication.htm</a>에서 확인할 수 있습니다.</li>
    </ul>
  </li>
  <li>암호화 (Encryption): Encrypt using Oracle-managed keys (기본 설정 유지)</li>
</ul>

<p>미지막으로 <strong>블록 볼륨 생성 버튼 (Create Block Volume)</strong>을 클릭합니다.
<img src="/assets/img/getting-started/2022/oci-bv-2.png" alt="" title=" " />
<img src="/assets/img/getting-started/2022/oci-bv-3.png" alt="" title=" " /></p>

<h4 id="인스턴스에-볼륨-연결-attach--connect">인스턴스에 볼륨 연결 (Attach &amp; Connect)</h4>
<p>iSCSI 방식으로 볼륨을 인스턴스에 연결해보도록 하겠습니다. 메뉴에서 <strong>컴퓨트 (Compute) &gt; 인스턴스 (Instances)</strong>를 차례로 선택한 후에 앞서 생성한 인스턴스를 선택합니다. 인스턴스 상세 페이지에서 아래와 같이 좌측 <strong>리소스 (Resources)</strong> 메뉴에서 <strong>연결된 블록 볼륨 (Attached block volumes)</strong>을 선택합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-4.png" alt="" title=" " /></p>

<p><strong>블록 볼륨 연결 (Attach block volume)</strong>버튼을 클릭하고 다음과 같이 입력/선택 합니다.</p>
<ul>
  <li><strong>블록 볼륨 선택 (Select volume):</strong> 앞서 생성한 블록 볼륨을 선택합니다.</li>
  <li><strong>장치 경로 (Device path):</strong> 목록중에서 하나를 선택합니다. (/dev/oracleoci/oraclevdb)</li>
  <li><strong>연결 유형 (Attachment type):</strong> ISCSI</li>
  <li><strong>액세스 (Access):</strong> 읽기/쓰기(Read/write)</li>
</ul>

<p><img src="/assets/img/getting-started/2022/oci-bv-5.png" alt="" title=" " /></p>

<p>연결을 클릭합니다.</p>

<p>이제 iSCSI 연결을 구성할 수 있습니다. 우선 <strong>연결된 블록 볼륨</strong> 메뉴에서 연결된 블록 볼륨의 우측 아이콘을 선택한 후 <strong>iSCSI 명령 및 정보 (iSCSI commands and inforamtion)</strong>를 선택합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-6.png" alt="" title=" " /></p>

<p>다음과 같이 <strong>iSCSI 명령 및 정보</strong> 대화창에서 접속 (Connect)에 있는 명령어를 복사합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-7.png" alt="" title=" " /></p>

<p>인스턴스에 SSH로 접속합니다.</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>ssh <span class="nt">-i</span> &lt;private_key_file&gt; &lt;username&gt;@&lt;public-ip-address&gt;
</code></pre></div></div>

<p>인스턴스에 SSH로 접속하면, 위에서 복사한 <code class="language-plaintext highlighter-rouge">iscsiadm</code>명령어를 실행합니다. 다음은 예시입니다.</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>iscsiadm <span class="nt">-m</span> node <span class="nt">-o</span> new <span class="nt">-T</span> iqn.2015-12.com.oracleiaas:ac4b3e1c-1a24-4dc9-88dc-280797acfb14 <span class="nt">-p</span> 169.254.2.2:3260
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>iscsiadm <span class="nt">-m</span> node <span class="nt">-o</span> update <span class="nt">-T</span> iqn.2015-12.com.oracleiaas:ac4b3e1c-1a24-4dc9-88dc-280797acfb14 <span class="nt">-n</span> node.startup <span class="nt">-v</span> automatic
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>iscsiadm <span class="nt">-m</span> node <span class="nt">-T</span> iqn.2015-12.com.oracleiaas:ac4b3e1c-1a24-4dc9-88dc-280797acfb14 <span class="nt">-p</span> 169.254.2.2:3260 <span class="nt">-l</span>
</code></pre></div></div>

<p>다음과 같이 fdisk 명령어를 실행해 보면, <strong>/dev/sdb</strong> 디스크가 연결되어 있는 것을 확인할 수 있습니다. 이제 포멧 및 마운트 작업 수행이 가능합니다.</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>fdisk <span class="nt">-l</span>
<span class="go">
Disk /dev/sdb: 50 GiB, 53687091200 bytes, 104857600 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 1048576 bytes
</span></code></pre></div></div>

<h4 id="블록-볼륨-포멧">블록 볼륨 포멧</h4>
<p>블록 볼륨 포멧을 할 때 원하는 파일 시스템 파일로 포멧할 수 있습니다. 다음은 ext3 파일 시스템으로 포멧하는 명령어 예시입니다.</p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo</span> /sbin/mkfs.ext3 /dev/sdb
</code></pre></div></div>

<p>위에서 지정한 장치 경로 (Device path)를 통해서도 포멧이 가능합니다.</p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo</span> /sbin/mkfs.ext3 /dev/oracleoci/oraclevdb
</code></pre></div></div>

<blockquote>
  <p>일관된 장치 경로(Consistent Device Path) 기능은 블록 볼륨이 둘 이상인 상태에서 장치의 이름으로 마운트할 경우 재부팅 시 장치 이름과 실제 장치의 대응 순서가 달라질 수 있는데, 이 순서를 보장하기 위한 기능입니다. 이 기능은 OCI에서 제공되는 특정 이미지에서만 제공되는데, 자세한 내용은 <a href="https://docs.oracle.com/en-us/iaas/Content/Block/References/consistentdevicepaths.htm">https://docs.oracle.com/en-us/iaas/Content/Block/References/consistentdevicepaths.htm</a> 페이지에서 확인활 수 있습니다.</p>
</blockquote>

<p>다음 명령어로 파일 시스템을 조회해 볼 수 있습니다.</p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>lsblk <span class="nt">-f</span>
<span class="go">NAME               FSTYPE      LABEL UUID                                   MOUNTPOINT
sda                                                                         
|-sda1             vfat              2C33-7BA8                              /boot/efi
|-sda2             xfs               f5a988c4-7f58-4592-8edc-a60130c894b9   /boot
`-sda3             LVM2_member       ppZKAk-x3TH-chAK-4850-Qx9L-1VEW-PC5eBq 
  |-ocivolume-root xfs               cc7fcbb1-bc82-4e5a-9fdc-3767d5c32c48   /
  `-ocivolume-oled xfs               3730314b-4ca7-4454-8aeb-82e97c986fb3   /var/oled
sdb                ext3              d9388269-e087-4d50-a058-f6d08b9772c5  
</span></code></pre></div></div>

<h4 id="블록-볼륨-마운트">블록 볼륨 마운트</h4>
<p>이제 마운트를 해보도록 하겠습니다. 여기서는 장치 경로를 통해 마운트를 합니다. 다음과 같이 마운트할 경로를 생성합니다.</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo mkdir</span> /mnt/vol1
</code></pre></div></div>

<p>/etc/fstab 파일을 오픈하여 다음과 같이 제일 아래에 다음 라인을 추가합니다.</p>
<blockquote>
  <p>fstab에 추가하면, 인스턴스를 리부팅 하더라도 자동으로 마운트가 됩니다.</p>
</blockquote>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>vi /etc/fstab
<span class="go">
</span><span class="gp">#</span><span class="w"> </span>아래 라인 추가
<span class="go">/dev/oracleoci/oraclevdb /mnt/vol1 ext3 defaults,_netdev,nofail 0 2
</span></code></pre></div></div>

<blockquote>
  <p>디바이스은 연결된 블록 볼륨 화면에서도 확인 가능하지만, 다음 명령어로도 확인이 가능합니다. 
<mark>ls -la /dev/oracleoci/</mark></p>
</blockquote>

<p>이제 다음 명령어로 마운트합니다.</p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>mount <span class="nt">-a</span>
</code></pre></div></div>

<p>마운트 된 것을 확인할 수 있습니다.</p>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">df</span> <span class="nt">-h</span>
<span class="go">Filesystem                  Size  Used Avail Use% Mounted on
devtmpfs                    7.7G     0  7.7G   0% /dev
tmpfs                       7.7G     0  7.7G   0% /dev/shm
tmpfs                       7.7G   41M  7.7G   1% /run
tmpfs                       7.7G     0  7.7G   0% /sys/fs/cgroup
/dev/mapper/ocivolume-root   36G  8.4G   28G  24% /
/dev/mapper/ocivolume-oled   10G  120M  9.9G   2% /var/oled
/dev/sda2                  1014M  316M  699M  32% /boot
/dev/sda1                   100M  5.0M   95M   5% /boot/efi
tmpfs                       1.6G     0  1.6G   0% /run/user/0
tmpfs                       1.6G     0  1.6G   0% /run/user/987
tmpfs                       1.6G     0  1.6G   0% /run/user/1000
/dev/sdb                     49G   53M   47G   1% /mnt/vol1
</span></code></pre></div></div>

<h3 id="모든-리소스-정리">모든 리소스 정리</h3>
<p>튜토리얼을 통해서 생성한 리소스에 대한 삭제는 다음 순서대로 진행합니다.</p>

<h4 id="블록-볼륨-분리-및-삭제">블록 볼륨 분리 및 삭제</h4>
<p>메뉴에서 <strong>컴퓨트 (Compute) &gt; 인스턴스 (Instances)</strong>에서 실습에서 사용한 인스턴스를 선택합니다. 인스턴스 세부 정보 화면에서 좌측 <strong>리소스 (Resources)</strong> 세션의 <strong>연결된 블록 볼륨</strong>을 선택합니다. 목록에서 실습에서 사용한 볼륨 오른쪽 아이콘을 선택하고 <strong>분리 (Detach)</strong>를 선택하여 인스턴스를 분리합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-8.png" alt="" title=" " /></p>

<p>이제 볼륨을 삭제할 수 있습니다. 메뉴에서 <strong>스토리지 (Storage) &gt; 블록 볼륨 (Block Volumes)</strong>를 차례로 선택한 후에 실습에서 사용한 블록 볼륨의 오른쪽 아이콘을 클릭하고 <strong>종료 (Terminate)</strong>를 선택하여 볼륨을 삭제합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-9.png" alt="" title=" " /></p>

<h4 id="인스턴스-종료">인스턴스 종료</h4>
<p>메뉴에서 <strong>컴퓨트 (Compute) &gt; 인스턴스 (Instances)</strong>를 차례로 선택한 후 목록에서 실습에서 사용한 인스턴스의 오른쪽 아이콘을 클릭하고 <strong>종료 (Terminate)</strong>를 선택합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-10.png" alt="" title=" " /></p>

<p>삭제 대화창에서 <strong>부팅 볼륨을 영구적으로 삭제 (Permanently delete the attached boot volume)</strong>를 선택한 후 <strong>인스턴스 종료</strong> 버튼을 클릭하여 인스턴스와 부트볼륨을 모두 삭제합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-11.png" alt="" title=" " /></p>

<h4 id="가상-클라우드-네트워크-virtual-cloud-network-삭제">가상 클라우드 네트워크 (Virtual Cloud Network) 삭제</h4>
<p>메뉴에서 <strong>네트워킹 (Networking) &gt; 가상 클라우드 네트워크 (Virtual Cloud Network)</strong> 을 차례로 선택한 후 실습에서 사용한 VCN 오른쪽 메뉴를 클릭하고 <strong>종료 (Terminate)</strong>를 선택합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-12.png" alt="" /></p>

<p>VCN과 연관된 모든 리소스들이 나열됩니다. <strong>모두 종료</strong>를 클릭하여 VCN과 관련된 모든 리소스를 삭제합니다.</p>

<p><img src="/assets/img/getting-started/2022/oci-bv-13.png" alt="" /></p>

<blockquote>
  <p>VCN의 리소스들을 다른 자원에서 사용중인 경우라면 VCN 자원을 삭제할 수 없습니다. 이 경우에는 연관된 자원을 삭제 한 후에 다시 VCN 리소스를 정리하여야 합니다.</p>
</blockquote>
:ET